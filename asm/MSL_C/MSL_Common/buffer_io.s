.include "macros.inc"

.section .text, "ax"

glabel __prep_buffer
/* 80161814 0015CD34  80 83 00 18 */	lwz r4, 0x18(r3)
/* 80161818 0015CD38  80 03 00 2C */	lwz r0, 0x2c(r3)
/* 8016181C 0015CD3C  80 C3 00 1C */	lwz r6, 0x1c(r3)
/* 80161820 0015CD40  80 A3 00 20 */	lwz r5, 0x20(r3)
/* 80161824 0015CD44  7C 80 00 38 */	and r0, r4, r0
/* 80161828 0015CD48  90 C3 00 24 */	stw r6, 0x24(r3)
/* 8016182C 0015CD4C  7C 00 28 50 */	subf r0, r0, r5
/* 80161830 0015CD50  90 03 00 28 */	stw r0, 0x28(r3)
/* 80161834 0015CD54  90 83 00 34 */	stw r4, 0x34(r3)
/* 80161838 0015CD58  4E 80 00 20 */	blr 

glabel __flush_buffer
/* 8016183C 0015CD5C  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 80161840 0015CD60  7C 08 02 A6 */	mflr r0
/* 80161844 0015CD64  90 01 00 14 */	stw r0, 0x14(r1)
/* 80161848 0015CD68  93 E1 00 0C */	stw r31, 0xc(r1)
/* 8016184C 0015CD6C  7C 9F 23 78 */	mr r31, r4
/* 80161850 0015CD70  93 C1 00 08 */	stw r30, 8(r1)
/* 80161854 0015CD74  7C 7E 1B 78 */	mr r30, r3
/* 80161858 0015CD78  80 A3 00 1C */	lwz r5, 0x1c(r3)
/* 8016185C 0015CD7C  80 03 00 24 */	lwz r0, 0x24(r3)
/* 80161860 0015CD80  7C 05 00 51 */	subf. r0, r5, r0
/* 80161864 0015CD84  41 82 00 50 */	beq lbl_801618B4
/* 80161868 0015CD88  81 9E 00 40 */	lwz r12, 0x40(r30)
/* 8016186C 0015CD8C  7C A4 2B 78 */	mr r4, r5
/* 80161870 0015CD90  90 03 00 28 */	stw r0, 0x28(r3)
/* 80161874 0015CD94  38 BE 00 28 */	addi r5, r30, 0x28
/* 80161878 0015CD98  80 63 00 00 */	lwz r3, 0(r3)
/* 8016187C 0015CD9C  80 DE 00 48 */	lwz r6, 0x48(r30)
/* 80161880 0015CDA0  7D 89 03 A6 */	mtctr r12
/* 80161884 0015CDA4  4E 80 04 21 */	bctrl 
/* 80161888 0015CDA8  2C 1F 00 00 */	cmpwi r31, 0
/* 8016188C 0015CDAC  41 82 00 0C */	beq lbl_80161898
/* 80161890 0015CDB0  80 1E 00 28 */	lwz r0, 0x28(r30)
/* 80161894 0015CDB4  90 1F 00 00 */	stw r0, 0(r31)
lbl_80161898:
/* 80161898 0015CDB8  2C 03 00 00 */	cmpwi r3, 0
/* 8016189C 0015CDBC  41 82 00 08 */	beq lbl_801618A4
/* 801618A0 0015CDC0  48 00 00 3C */	b lbl_801618DC
lbl_801618A4:
/* 801618A4 0015CDC4  80 7E 00 18 */	lwz r3, 0x18(r30)
/* 801618A8 0015CDC8  80 1E 00 28 */	lwz r0, 0x28(r30)
/* 801618AC 0015CDCC  7C 03 02 14 */	add r0, r3, r0
/* 801618B0 0015CDD0  90 1E 00 18 */	stw r0, 0x18(r30)
lbl_801618B4:
/* 801618B4 0015CDD4  80 9E 00 18 */	lwz r4, 0x18(r30)
/* 801618B8 0015CDD8  38 60 00 00 */	li r3, 0
/* 801618BC 0015CDDC  80 1E 00 2C */	lwz r0, 0x2c(r30)
/* 801618C0 0015CDE0  80 DE 00 1C */	lwz r6, 0x1c(r30)
/* 801618C4 0015CDE4  80 BE 00 20 */	lwz r5, 0x20(r30)
/* 801618C8 0015CDE8  7C 80 00 38 */	and r0, r4, r0
/* 801618CC 0015CDEC  90 DE 00 24 */	stw r6, 0x24(r30)
/* 801618D0 0015CDF0  7C 00 28 50 */	subf r0, r0, r5
/* 801618D4 0015CDF4  90 1E 00 28 */	stw r0, 0x28(r30)
/* 801618D8 0015CDF8  90 9E 00 34 */	stw r4, 0x34(r30)
lbl_801618DC:
/* 801618DC 0015CDFC  80 01 00 14 */	lwz r0, 0x14(r1)
/* 801618E0 0015CE00  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 801618E4 0015CE04  83 C1 00 08 */	lwz r30, 8(r1)
/* 801618E8 0015CE08  7C 08 03 A6 */	mtlr r0
/* 801618EC 0015CE0C  38 21 00 10 */	addi r1, r1, 0x10
/* 801618F0 0015CE10  4E 80 00 20 */	blr 