.include "macros.inc"

.section .text, "ax"

glabel fclose
/* 80161BFC 0015D11C  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 80161C00 0015D120  7C 08 02 A6 */	mflr r0
/* 80161C04 0015D124  2C 03 00 00 */	cmpwi r3, 0
/* 80161C08 0015D128  90 01 00 24 */	stw r0, 0x24(r1)
/* 80161C0C 0015D12C  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 80161C10 0015D130  93 C1 00 18 */	stw r30, 0x18(r1)
/* 80161C14 0015D134  93 A1 00 14 */	stw r29, 0x14(r1)
/* 80161C18 0015D138  7C 7D 1B 78 */	mr r29, r3
/* 80161C1C 0015D13C  40 82 00 0C */	bne .L_80161C28
/* 80161C20 0015D140  38 60 FF FF */	li r3, -1
/* 80161C24 0015D144  48 00 00 78 */	b .L_80161C9C
.L_80161C28:
/* 80161C28 0015D148  80 03 00 04 */	lwz r0, 4(r3)
/* 80161C2C 0015D14C  54 00 57 7F */	rlwinm. r0, r0, 0xa, 0x1d, 0x1f
/* 80161C30 0015D150  40 82 00 0C */	bne .L_80161C3C
/* 80161C34 0015D154  38 60 00 00 */	li r3, 0
/* 80161C38 0015D158  48 00 00 64 */	b .L_80161C9C
.L_80161C3C:
/* 80161C3C 0015D15C  48 00 00 7D */	bl fflush
/* 80161C40 0015D160  81 9D 00 44 */	lwz r12, 0x44(r29)
/* 80161C44 0015D164  7C 7E 1B 78 */	mr r30, r3
/* 80161C48 0015D168  80 7D 00 00 */	lwz r3, 0(r29)
/* 80161C4C 0015D16C  7D 89 03 A6 */	mtctr r12
/* 80161C50 0015D170  4E 80 04 21 */	bctrl 
/* 80161C54 0015D174  80 1D 00 08 */	lwz r0, 8(r29)
/* 80161C58 0015D178  38 A0 00 00 */	li r5, 0
/* 80161C5C 0015D17C  80 9D 00 04 */	lwz r4, 4(r29)
/* 80161C60 0015D180  7C 7F 1B 78 */	mr r31, r3
/* 80161C64 0015D184  54 00 27 FF */	rlwinm. r0, r0, 4, 0x1f, 0x1f
/* 80161C68 0015D188  90 BD 00 00 */	stw r5, 0(r29)
/* 80161C6C 0015D18C  54 84 02 8C */	rlwinm r4, r4, 0, 0xa, 6
/* 80161C70 0015D190  90 9D 00 04 */	stw r4, 4(r29)
/* 80161C74 0015D194  41 82 00 0C */	beq .L_80161C80
/* 80161C78 0015D198  80 7D 00 1C */	lwz r3, 0x1c(r29)
/* 80161C7C 0015D19C  4B FF DC 95 */	bl free
.L_80161C80:
/* 80161C80 0015D1A0  2C 1E 00 00 */	cmpwi r30, 0
/* 80161C84 0015D1A4  38 00 00 00 */	li r0, 0
/* 80161C88 0015D1A8  40 82 00 0C */	bne .L_80161C94
/* 80161C8C 0015D1AC  2C 1F 00 00 */	cmpwi r31, 0
/* 80161C90 0015D1B0  41 82 00 08 */	beq .L_80161C98
.L_80161C94:
/* 80161C94 0015D1B4  38 00 00 01 */	li r0, 1
.L_80161C98:
/* 80161C98 0015D1B8  7C 60 00 D0 */	neg r3, r0
.L_80161C9C:
/* 80161C9C 0015D1BC  80 01 00 24 */	lwz r0, 0x24(r1)
/* 80161CA0 0015D1C0  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 80161CA4 0015D1C4  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 80161CA8 0015D1C8  83 A1 00 14 */	lwz r29, 0x14(r1)
/* 80161CAC 0015D1CC  7C 08 03 A6 */	mtlr r0
/* 80161CB0 0015D1D0  38 21 00 20 */	addi r1, r1, 0x20
/* 80161CB4 0015D1D4  4E 80 00 20 */	blr 

glabel fflush
/* 80161CB8 0015D1D8  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 80161CBC 0015D1DC  7C 08 02 A6 */	mflr r0
/* 80161CC0 0015D1E0  2C 03 00 00 */	cmpwi r3, 0
/* 80161CC4 0015D1E4  90 01 00 14 */	stw r0, 0x14(r1)
/* 80161CC8 0015D1E8  93 E1 00 0C */	stw r31, 0xc(r1)
/* 80161CCC 0015D1EC  7C 7F 1B 78 */	mr r31, r3
/* 80161CD0 0015D1F0  93 C1 00 08 */	stw r30, 8(r1)
/* 80161CD4 0015D1F4  40 82 00 0C */	bne .L_80161CE0
/* 80161CD8 0015D1F8  4B FF DE 0D */	bl __flush_all
/* 80161CDC 0015D1FC  48 00 00 F8 */	b .L_80161DD4
.L_80161CE0:
/* 80161CE0 0015D200  88 03 00 0A */	lbz r0, 0xa(r3)
/* 80161CE4 0015D204  2C 00 00 00 */	cmpwi r0, 0
/* 80161CE8 0015D208  40 82 00 10 */	bne .L_80161CF8
/* 80161CEC 0015D20C  80 83 00 04 */	lwz r4, 4(r3)
/* 80161CF0 0015D210  54 80 57 7F */	rlwinm. r0, r4, 0xa, 0x1d, 0x1f
/* 80161CF4 0015D214  40 82 00 0C */	bne .L_80161D00
.L_80161CF8:
/* 80161CF8 0015D218  38 60 FF FF */	li r3, -1
/* 80161CFC 0015D21C  48 00 00 D8 */	b .L_80161DD4
.L_80161D00:
/* 80161D00 0015D220  54 80 2F 7E */	rlwinm r0, r4, 5, 0x1d, 0x1f
/* 80161D04 0015D224  28 00 00 01 */	cmplwi r0, 1
/* 80161D08 0015D228  40 82 00 0C */	bne .L_80161D14
/* 80161D0C 0015D22C  38 60 00 00 */	li r3, 0
/* 80161D10 0015D230  48 00 00 C4 */	b .L_80161DD4
.L_80161D14:
/* 80161D14 0015D234  80 83 00 08 */	lwz r4, 8(r3)
/* 80161D18 0015D238  54 80 1F 7E */	srwi r0, r4, 0x1d
/* 80161D1C 0015D23C  28 00 00 03 */	cmplwi r0, 3
/* 80161D20 0015D240  41 80 00 10 */	blt .L_80161D30
/* 80161D24 0015D244  38 00 00 02 */	li r0, 2
/* 80161D28 0015D248  50 04 E8 04 */	rlwimi r4, r0, 0x1d, 0, 2
/* 80161D2C 0015D24C  90 83 00 08 */	stw r4, 8(r3)
.L_80161D30:
/* 80161D30 0015D250  80 03 00 08 */	lwz r0, 8(r3)
/* 80161D34 0015D254  54 00 1F 7E */	srwi r0, r0, 0x1d
/* 80161D38 0015D258  28 00 00 02 */	cmplwi r0, 2
/* 80161D3C 0015D25C  40 82 00 0C */	bne .L_80161D48
/* 80161D40 0015D260  38 00 00 00 */	li r0, 0
/* 80161D44 0015D264  90 03 00 28 */	stw r0, 0x28(r3)
.L_80161D48:
/* 80161D48 0015D268  80 83 00 08 */	lwz r4, 8(r3)
/* 80161D4C 0015D26C  54 80 1F 7E */	srwi r0, r4, 0x1d
/* 80161D50 0015D270  28 00 00 01 */	cmplwi r0, 1
/* 80161D54 0015D274  41 82 00 14 */	beq .L_80161D68
/* 80161D58 0015D278  54 80 00 FE */	clrlwi r0, r4, 3
/* 80161D5C 0015D27C  90 03 00 08 */	stw r0, 8(r3)
/* 80161D60 0015D280  38 60 00 00 */	li r3, 0
/* 80161D64 0015D284  48 00 00 70 */	b .L_80161DD4
.L_80161D68:
/* 80161D68 0015D288  80 03 00 04 */	lwz r0, 4(r3)
/* 80161D6C 0015D28C  54 00 57 7E */	rlwinm r0, r0, 0xa, 0x1d, 0x1f
/* 80161D70 0015D290  28 00 00 01 */	cmplwi r0, 1
/* 80161D74 0015D294  41 82 00 0C */	beq .L_80161D80
/* 80161D78 0015D298  3B C0 00 00 */	li r30, 0
/* 80161D7C 0015D29C  48 00 00 10 */	b .L_80161D8C
.L_80161D80:
/* 80161D80 0015D2A0  7F E3 FB 78 */	mr r3, r31
/* 80161D84 0015D2A4  48 00 02 C1 */	bl ftell
/* 80161D88 0015D2A8  7C 7E 1B 78 */	mr r30, r3
.L_80161D8C:
/* 80161D8C 0015D2AC  7F E3 FB 78 */	mr r3, r31
/* 80161D90 0015D2B0  38 80 00 00 */	li r4, 0
/* 80161D94 0015D2B4  4B FF FA A9 */	bl __flush_buffer
/* 80161D98 0015D2B8  2C 03 00 00 */	cmpwi r3, 0
/* 80161D9C 0015D2BC  41 82 00 1C */	beq .L_80161DB8
/* 80161DA0 0015D2C0  38 60 00 01 */	li r3, 1
/* 80161DA4 0015D2C4  38 00 00 00 */	li r0, 0
/* 80161DA8 0015D2C8  98 7F 00 0A */	stb r3, 0xa(r31)
/* 80161DAC 0015D2CC  38 60 FF FF */	li r3, -1
/* 80161DB0 0015D2D0  90 1F 00 28 */	stw r0, 0x28(r31)
/* 80161DB4 0015D2D4  48 00 00 20 */	b .L_80161DD4
.L_80161DB8:
/* 80161DB8 0015D2D8  80 1F 00 08 */	lwz r0, 8(r31)
/* 80161DBC 0015D2DC  38 80 00 00 */	li r4, 0
/* 80161DC0 0015D2E0  93 DF 00 18 */	stw r30, 0x18(r31)
/* 80161DC4 0015D2E4  38 60 00 00 */	li r3, 0
/* 80161DC8 0015D2E8  54 00 00 FE */	clrlwi r0, r0, 3
/* 80161DCC 0015D2EC  90 1F 00 08 */	stw r0, 8(r31)
/* 80161DD0 0015D2F0  90 9F 00 28 */	stw r4, 0x28(r31)
.L_80161DD4:
/* 80161DD4 0015D2F4  80 01 00 14 */	lwz r0, 0x14(r1)
/* 80161DD8 0015D2F8  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 80161DDC 0015D2FC  83 C1 00 08 */	lwz r30, 8(r1)
/* 80161DE0 0015D300  7C 08 03 A6 */	mtlr r0
/* 80161DE4 0015D304  38 21 00 10 */	addi r1, r1, 0x10
/* 80161DE8 0015D308  4E 80 00 20 */	blr 

glabel __msl_strnicmp
/* 80161DEC 0015D30C  3C C0 80 1B */	lis r6, _current_locale@ha
/* 80161DF0 0015D310  38 C6 D8 D0 */	addi r6, r6, _current_locale@l
/* 80161DF4 0015D314  80 C6 00 38 */	lwz r6, 0x38(r6)
/* 80161DF8 0015D318  7C A9 03 A6 */	mtctr r5
/* 80161DFC 0015D31C  2C 05 00 00 */	cmpwi r5, 0
/* 80161E00 0015D320  40 81 00 A4 */	ble .L_80161EA4
.L_80161E04:
/* 80161E04 0015D324  88 A3 00 00 */	lbz r5, 0(r3)
/* 80161E08 0015D328  38 00 00 00 */	li r0, 0
/* 80161E0C 0015D32C  38 63 00 01 */	addi r3, r3, 1
/* 80161E10 0015D330  7C A7 07 75 */	extsb. r7, r5
/* 80161E14 0015D334  41 80 00 0C */	blt .L_80161E20
/* 80161E18 0015D338  2C 07 01 00 */	cmpwi r7, 0x100
/* 80161E1C 0015D33C  41 80 00 08 */	blt .L_80161E24
.L_80161E20:
/* 80161E20 0015D340  38 00 00 01 */	li r0, 1
.L_80161E24:
/* 80161E24 0015D344  2C 00 00 00 */	cmpwi r0, 0
/* 80161E28 0015D348  41 82 00 08 */	beq .L_80161E30
/* 80161E2C 0015D34C  48 00 00 0C */	b .L_80161E38
.L_80161E30:
/* 80161E30 0015D350  80 A6 00 10 */	lwz r5, 0x10(r6)
/* 80161E34 0015D354  7C E5 38 AE */	lbzx r7, r5, r7
.L_80161E38:
/* 80161E38 0015D358  88 A4 00 00 */	lbz r5, 0(r4)
/* 80161E3C 0015D35C  7C E8 07 74 */	extsb r8, r7
/* 80161E40 0015D360  38 00 00 00 */	li r0, 0
/* 80161E44 0015D364  38 84 00 01 */	addi r4, r4, 1
/* 80161E48 0015D368  7C A7 07 75 */	extsb. r7, r5
/* 80161E4C 0015D36C  41 80 00 0C */	blt .L_80161E58
/* 80161E50 0015D370  2C 07 01 00 */	cmpwi r7, 0x100
/* 80161E54 0015D374  41 80 00 08 */	blt .L_80161E5C
.L_80161E58:
/* 80161E58 0015D378  38 00 00 01 */	li r0, 1
.L_80161E5C:
/* 80161E5C 0015D37C  2C 00 00 00 */	cmpwi r0, 0
/* 80161E60 0015D380  41 82 00 08 */	beq .L_80161E68
/* 80161E64 0015D384  48 00 00 0C */	b .L_80161E70
.L_80161E68:
/* 80161E68 0015D388  80 A6 00 10 */	lwz r5, 0x10(r6)
/* 80161E6C 0015D38C  7C E5 38 AE */	lbzx r7, r5, r7
.L_80161E70:
/* 80161E70 0015D390  7C E0 07 74 */	extsb r0, r7
/* 80161E74 0015D394  7C 08 00 00 */	cmpw r8, r0
/* 80161E78 0015D398  40 80 00 0C */	bge .L_80161E84
/* 80161E7C 0015D39C  38 60 FF FF */	li r3, -1
/* 80161E80 0015D3A0  4E 80 00 20 */	blr 
.L_80161E84:
/* 80161E84 0015D3A4  40 81 00 0C */	ble .L_80161E90
/* 80161E88 0015D3A8  38 60 00 01 */	li r3, 1
/* 80161E8C 0015D3AC  4E 80 00 20 */	blr 
.L_80161E90:
/* 80161E90 0015D3B0  2C 08 00 00 */	cmpwi r8, 0
/* 80161E94 0015D3B4  40 82 00 0C */	bne .L_80161EA0
/* 80161E98 0015D3B8  38 60 00 00 */	li r3, 0
/* 80161E9C 0015D3BC  4E 80 00 20 */	blr 
.L_80161EA0:
/* 80161EA0 0015D3C0  42 00 FF 64 */	bdnz .L_80161E04
.L_80161EA4:
/* 80161EA4 0015D3C4  38 60 00 00 */	li r3, 0
/* 80161EA8 0015D3C8  4E 80 00 20 */	blr 

glabel __msl_itoa
/* 80161EAC 0015D3CC  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 80161EB0 0015D3D0  7C 08 02 A6 */	mflr r0
/* 80161EB4 0015D3D4  2C 03 00 00 */	cmpwi r3, 0
/* 80161EB8 0015D3D8  38 E0 00 00 */	li r7, 0
/* 80161EBC 0015D3DC  90 01 00 14 */	stw r0, 0x14(r1)
/* 80161EC0 0015D3E0  39 00 00 00 */	li r8, 0
/* 80161EC4 0015D3E4  93 E1 00 0C */	stw r31, 0xc(r1)
/* 80161EC8 0015D3E8  93 C1 00 08 */	stw r30, 8(r1)
/* 80161ECC 0015D3EC  7C 9E 23 78 */	mr r30, r4
/* 80161ED0 0015D3F0  40 80 00 0C */	bge .L_80161EDC
/* 80161ED4 0015D3F4  7C 63 00 D0 */	neg r3, r3
/* 80161ED8 0015D3F8  38 E0 00 01 */	li r7, 1
.L_80161EDC:
/* 80161EDC 0015D3FC  7C 86 23 78 */	mr r6, r4
.L_80161EE0:
/* 80161EE0 0015D400  7C 03 2B 96 */	divwu r0, r3, r5
/* 80161EE4 0015D404  7C 00 29 D6 */	mullw r0, r0, r5
/* 80161EE8 0015D408  7D 20 18 50 */	subf r9, r0, r3
/* 80161EEC 0015D40C  2C 09 00 09 */	cmpwi r9, 9
/* 80161EF0 0015D410  40 81 00 18 */	ble .L_80161F08
/* 80161EF4 0015D414  38 09 00 37 */	addi r0, r9, 0x37
/* 80161EF8 0015D418  39 08 00 01 */	addi r8, r8, 1
/* 80161EFC 0015D41C  98 06 00 00 */	stb r0, 0(r6)
/* 80161F00 0015D420  38 C6 00 01 */	addi r6, r6, 1
/* 80161F04 0015D424  48 00 00 14 */	b .L_80161F18
.L_80161F08:
/* 80161F08 0015D428  38 09 00 30 */	addi r0, r9, 0x30
/* 80161F0C 0015D42C  39 08 00 01 */	addi r8, r8, 1
/* 80161F10 0015D430  98 06 00 00 */	stb r0, 0(r6)
/* 80161F14 0015D434  38 C6 00 01 */	addi r6, r6, 1
.L_80161F18:
/* 80161F18 0015D438  7C 63 2B 97 */	divwu. r3, r3, r5
/* 80161F1C 0015D43C  40 82 FF C4 */	bne .L_80161EE0
/* 80161F20 0015D440  2C 07 00 00 */	cmpwi r7, 0
/* 80161F24 0015D444  41 82 00 10 */	beq .L_80161F34
/* 80161F28 0015D448  38 00 00 2D */	li r0, 0x2d
/* 80161F2C 0015D44C  7C 04 41 AE */	stbx r0, r4, r8
/* 80161F30 0015D450  39 08 00 01 */	addi r8, r8, 1
.L_80161F34:
/* 80161F34 0015D454  38 00 00 00 */	li r0, 0
/* 80161F38 0015D458  7F C3 F3 78 */	mr r3, r30
/* 80161F3C 0015D45C  7C 04 41 AE */	stbx r0, r4, r8
/* 80161F40 0015D460  3B E0 00 00 */	li r31, 0
/* 80161F44 0015D464  4B FF A0 A1 */	bl strlen
/* 80161F48 0015D468  38 C3 FF FF */	addi r6, r3, -1
/* 80161F4C 0015D46C  7F C3 F3 78 */	mr r3, r30
/* 80161F50 0015D470  7C 9E 32 14 */	add r4, r30, r6
/* 80161F54 0015D474  48 00 00 24 */	b .L_80161F78
.L_80161F58:
/* 80161F58 0015D478  88 A3 00 00 */	lbz r5, 0(r3)
/* 80161F5C 0015D47C  3B FF 00 01 */	addi r31, r31, 1
/* 80161F60 0015D480  88 04 00 00 */	lbz r0, 0(r4)
/* 80161F64 0015D484  38 C6 FF FF */	addi r6, r6, -1
/* 80161F68 0015D488  98 03 00 00 */	stb r0, 0(r3)
/* 80161F6C 0015D48C  38 63 00 01 */	addi r3, r3, 1
/* 80161F70 0015D490  98 A4 00 00 */	stb r5, 0(r4)
/* 80161F74 0015D494  38 84 FF FF */	addi r4, r4, -1
.L_80161F78:
/* 80161F78 0015D498  7C 1F 30 00 */	cmpw r31, r6
/* 80161F7C 0015D49C  41 80 FF DC */	blt .L_80161F58
/* 80161F80 0015D4A0  7F C3 F3 78 */	mr r3, r30
/* 80161F84 0015D4A4  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 80161F88 0015D4A8  83 C1 00 08 */	lwz r30, 8(r1)
/* 80161F8C 0015D4AC  80 01 00 14 */	lwz r0, 0x14(r1)
/* 80161F90 0015D4B0  7C 08 03 A6 */	mtlr r0
/* 80161F94 0015D4B4  38 21 00 10 */	addi r1, r1, 0x10
/* 80161F98 0015D4B8  4E 80 00 20 */	blr 
