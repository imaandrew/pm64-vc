.include "macros.inc"

.section .text, "ax"

glabel __TRK_write_console
/* 80173240 0016E760  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 80173244 0016E764  7C 08 02 A6 */	mflr r0
/* 80173248 0016E768  90 01 00 24 */	stw r0, 0x24(r1)
/* 8017324C 0016E76C  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 80173250 0016E770  7C BF 2B 78 */	mr r31, r5
/* 80173254 0016E774  93 C1 00 18 */	stw r30, 0x18(r1)
/* 80173258 0016E778  7C 9E 23 78 */	mr r30, r4
/* 8017325C 0016E77C  48 00 09 B1 */	bl GetUseSerialIO
/* 80173260 0016E780  54 60 06 3F */	clrlwi. r0, r3, 0x18
/* 80173264 0016E784  40 82 00 0C */	bne .L_80173270
/* 80173268 0016E788  38 60 00 01 */	li r3, 1
/* 8017326C 0016E78C  48 00 00 78 */	b .L_801732E4
.L_80173270:
/* 80173270 0016E790  4B FF D9 9D */	bl GetTRKConnected
/* 80173274 0016E794  2C 03 00 00 */	cmpwi r3, 0
/* 80173278 0016E798  40 82 00 0C */	bne .L_80173284
/* 8017327C 0016E79C  38 60 00 01 */	li r3, 1
/* 80173280 0016E7A0  48 00 00 64 */	b .L_801732E4
.L_80173284:
/* 80173284 0016E7A4  80 1F 00 00 */	lwz r0, 0(r31)
/* 80173288 0016E7A8  7F C6 F3 78 */	mr r6, r30
/* 8017328C 0016E7AC  38 A1 00 08 */	addi r5, r1, 8
/* 80173290 0016E7B0  38 60 00 D0 */	li r3, 0xd0
/* 80173294 0016E7B4  90 01 00 08 */	stw r0, 8(r1)
/* 80173298 0016E7B8  38 80 00 01 */	li r4, 1
/* 8017329C 0016E7BC  4B FF FC 15 */	bl $6fill$6
/* 801732A0 0016E7C0  54 60 06 3E */	clrlwi r0, r3, 0x18
/* 801732A4 0016E7C4  80 61 00 08 */	lwz r3, 8(r1)
/* 801732A8 0016E7C8  2C 00 00 01 */	cmpwi r0, 1
/* 801732AC 0016E7CC  90 7F 00 00 */	stw r3, 0(r31)
/* 801732B0 0016E7D0  41 82 00 30 */	beq .L_801732E0
/* 801732B4 0016E7D4  40 80 00 10 */	bge .L_801732C4
/* 801732B8 0016E7D8  2C 00 00 00 */	cmpwi r0, 0
/* 801732BC 0016E7DC  40 80 00 14 */	bge .L_801732D0
/* 801732C0 0016E7E0  48 00 00 20 */	b .L_801732E0
.L_801732C4:
/* 801732C4 0016E7E4  2C 00 00 03 */	cmpwi r0, 3
/* 801732C8 0016E7E8  40 80 00 18 */	bge .L_801732E0
/* 801732CC 0016E7EC  48 00 00 0C */	b .L_801732D8
.L_801732D0:
/* 801732D0 0016E7F0  38 60 00 00 */	li r3, 0
/* 801732D4 0016E7F4  48 00 00 10 */	b .L_801732E4
.L_801732D8:
/* 801732D8 0016E7F8  38 60 00 02 */	li r3, 2
/* 801732DC 0016E7FC  48 00 00 08 */	b .L_801732E4
.L_801732E0:
/* 801732E0 0016E800  38 60 00 01 */	li r3, 1
.L_801732E4:
/* 801732E4 0016E804  80 01 00 24 */	lwz r0, 0x24(r1)
/* 801732E8 0016E808  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 801732EC 0016E80C  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 801732F0 0016E810  7C 08 03 A6 */	mtlr r0
/* 801732F4 0016E814  38 21 00 20 */	addi r1, r1, 0x20
/* 801732F8 0016E818  4E 80 00 20 */	blr 

glabel __read_console
/* 801732FC 0016E81C  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 80173300 0016E820  7C 08 02 A6 */	mflr r0
/* 80173304 0016E824  90 01 00 24 */	stw r0, 0x24(r1)
/* 80173308 0016E828  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 8017330C 0016E82C  7C BF 2B 78 */	mr r31, r5
/* 80173310 0016E830  93 C1 00 18 */	stw r30, 0x18(r1)
/* 80173314 0016E834  7C 9E 23 78 */	mr r30, r4
/* 80173318 0016E838  48 00 08 F5 */	bl GetUseSerialIO
/* 8017331C 0016E83C  54 60 06 3F */	clrlwi. r0, r3, 0x18
/* 80173320 0016E840  40 82 00 0C */	bne .L_8017332C
/* 80173324 0016E844  38 60 00 01 */	li r3, 1
/* 80173328 0016E848  48 00 00 78 */	b .L_801733A0
.L_8017332C:
/* 8017332C 0016E84C  4B FF D8 E1 */	bl GetTRKConnected
/* 80173330 0016E850  2C 03 00 00 */	cmpwi r3, 0
/* 80173334 0016E854  40 82 00 0C */	bne .L_80173340
/* 80173338 0016E858  38 60 00 01 */	li r3, 1
/* 8017333C 0016E85C  48 00 00 64 */	b .L_801733A0
.L_80173340:
/* 80173340 0016E860  80 1F 00 00 */	lwz r0, 0(r31)
/* 80173344 0016E864  7F C6 F3 78 */	mr r6, r30
/* 80173348 0016E868  38 A1 00 08 */	addi r5, r1, 8
/* 8017334C 0016E86C  38 60 00 D1 */	li r3, 0xd1
/* 80173350 0016E870  90 01 00 08 */	stw r0, 8(r1)
/* 80173354 0016E874  38 80 00 00 */	li r4, 0
/* 80173358 0016E878  4B FF FB 59 */	bl $6fill$6
/* 8017335C 0016E87C  54 60 06 3E */	clrlwi r0, r3, 0x18
/* 80173360 0016E880  80 61 00 08 */	lwz r3, 8(r1)
/* 80173364 0016E884  2C 00 00 01 */	cmpwi r0, 1
/* 80173368 0016E888  90 7F 00 00 */	stw r3, 0(r31)
/* 8017336C 0016E88C  41 82 00 30 */	beq .L_8017339C
/* 80173370 0016E890  40 80 00 10 */	bge .L_80173380
/* 80173374 0016E894  2C 00 00 00 */	cmpwi r0, 0
/* 80173378 0016E898  40 80 00 14 */	bge .L_8017338C
/* 8017337C 0016E89C  48 00 00 20 */	b .L_8017339C
.L_80173380:
/* 80173380 0016E8A0  2C 00 00 03 */	cmpwi r0, 3
/* 80173384 0016E8A4  40 80 00 18 */	bge .L_8017339C
/* 80173388 0016E8A8  48 00 00 0C */	b .L_80173394
.L_8017338C:
/* 8017338C 0016E8AC  38 60 00 00 */	li r3, 0
/* 80173390 0016E8B0  48 00 00 10 */	b .L_801733A0
.L_80173394:
/* 80173394 0016E8B4  38 60 00 02 */	li r3, 2
/* 80173398 0016E8B8  48 00 00 08 */	b .L_801733A0
.L_8017339C:
/* 8017339C 0016E8BC  38 60 00 01 */	li r3, 1
.L_801733A0:
/* 801733A0 0016E8C0  80 01 00 24 */	lwz r0, 0x24(r1)
/* 801733A4 0016E8C4  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 801733A8 0016E8C8  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 801733AC 0016E8CC  7C 08 03 A6 */	mtlr r0
/* 801733B0 0016E8D0  38 21 00 20 */	addi r1, r1, 0x20
/* 801733B4 0016E8D4  4E 80 00 20 */	blr 

