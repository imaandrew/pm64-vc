.include "macros.inc"

.section .text, "ax"

glabel bta_sys_init
/* 800DDA64 000D8F84  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 800DDA68 000D8F88  7C 08 02 A6 */	mflr r0
/* 800DDA6C 000D8F8C  38 80 00 00 */	li r4, 0
/* 800DDA70 000D8F90  38 A0 00 8C */	li r5, 0x8c
/* 800DDA74 000D8F94  90 01 00 14 */	stw r0, 0x14(r1)
/* 800DDA78 000D8F98  93 E1 00 0C */	stw r31, 0xc(r1)
/* 800DDA7C 000D8F9C  3F E0 80 22 */	lis r31, lbl_802200B8@ha
/* 800DDA80 000D8FA0  38 7F 00 B8 */	addi r3, r31, lbl_802200B8@l
/* 800DDA84 000D8FA4  4B F2 69 B9 */	bl memset
/* 800DDA88 000D8FA8  80 AD 86 10 */	lwz r5, lbl_80246A90@sda21(r13)
/* 800DDA8C 000D8FAC  3B FF 00 B8 */	addi r31, r31, 0xb8
/* 800DDA90 000D8FB0  38 7F 00 68 */	addi r3, r31, 0x68
/* 800DDA94 000D8FB4  38 80 03 E8 */	li r4, 0x3e8
/* 800DDA98 000D8FB8  88 A5 00 03 */	lbz r5, 3(r5)
/* 800DDA9C 000D8FBC  48 00 02 0D */	bl ptim_init
/* 800DDAA0 000D8FC0  4B FF D8 91 */	bl GKI_get_taskid
/* 800DDAA4 000D8FC4  98 7F 00 7D */	stb r3, 0x7d(r31)
/* 800DDAA8 000D8FC8  80 6D 86 10 */	lwz r3, lbl_80246A90@sda21(r13)
/* 800DDAAC 000D8FCC  88 03 00 04 */	lbz r0, 4(r3)
/* 800DDAB0 000D8FD0  98 0D 93 20 */	stb r0, lbl_802477A0@sda21(r13)
/* 800DDAB4 000D8FD4  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 800DDAB8 000D8FD8  80 01 00 14 */	lwz r0, 0x14(r1)
/* 800DDABC 000D8FDC  7C 08 03 A6 */	mtlr r0
/* 800DDAC0 000D8FE0  38 21 00 10 */	addi r1, r1, 0x10
/* 800DDAC4 000D8FE4  4E 80 00 20 */	blr 

glabel bta_sys_event
/* 800DDAC8 000D8FE8  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 800DDACC 000D8FEC  7C 08 02 A6 */	mflr r0
/* 800DDAD0 000D8FF0  90 01 00 14 */	stw r0, 0x14(r1)
/* 800DDAD4 000D8FF4  93 E1 00 0C */	stw r31, 0xc(r1)
/* 800DDAD8 000D8FF8  3B E0 00 01 */	li r31, 1
/* 800DDADC 000D8FFC  93 C1 00 08 */	stw r30, 8(r1)
/* 800DDAE0 000D9000  7C 7E 1B 78 */	mr r30, r3
/* 800DDAE4 000D9004  88 0D 93 20 */	lbz r0, lbl_802477A0@sda21(r13)
/* 800DDAE8 000D9008  28 00 00 04 */	cmplwi r0, 4
/* 800DDAEC 000D900C  41 80 00 18 */	blt lbl_800DDB04
/* 800DDAF0 000D9010  3C 80 80 1A */	lis r4, lbl_8019B128@ha
/* 800DDAF4 000D9014  A0 BE 00 00 */	lhz r5, 0(r30)
/* 800DDAF8 000D9018  38 84 B1 28 */	addi r4, r4, lbl_8019B128@l
/* 800DDAFC 000D901C  38 60 05 03 */	li r3, 0x503
/* 800DDB00 000D9020  4B FF F6 05 */	bl LogMsg_1
lbl_800DDB04:
/* 800DDB04 000D9024  3C 60 80 22 */	lis r3, lbl_802200B8@ha
/* 800DDB08 000D9028  A0 9E 00 00 */	lhz r4, 0(r30)
/* 800DDB0C 000D902C  38 63 00 B8 */	addi r3, r3, lbl_802200B8@l
/* 800DDB10 000D9030  88 03 00 7E */	lbz r0, 0x7e(r3)
/* 800DDB14 000D9034  7C 85 46 70 */	srawi r5, r4, 8
/* 800DDB18 000D9038  2C 00 00 00 */	cmpwi r0, 0
/* 800DDB1C 000D903C  41 82 00 1C */	beq lbl_800DDB38
/* 800DDB20 000D9040  28 04 01 01 */	cmplwi r4, 0x101
/* 800DDB24 000D9044  40 82 00 08 */	bne lbl_800DDB2C
/* 800DDB28 000D9048  48 00 26 71 */	bl bta_dm_immediate_disable
lbl_800DDB2C:
/* 800DDB2C 000D904C  7F C3 F3 78 */	mr r3, r30
/* 800DDB30 000D9050  4B FF C3 E1 */	bl GKI_freebuf
/* 800DDB34 000D9054  48 00 00 68 */	b lbl_800DDB9C
lbl_800DDB38:
/* 800DDB38 000D9058  54 A0 06 3E */	clrlwi r0, r5, 0x18
/* 800DDB3C 000D905C  28 00 00 1A */	cmplwi r0, 0x1a
/* 800DDB40 000D9060  40 80 00 2C */	bge lbl_800DDB6C
/* 800DDB44 000D9064  54 A0 15 BA */	rlwinm r0, r5, 2, 0x16, 0x1d
/* 800DDB48 000D9068  7C 63 00 2E */	lwzx r3, r3, r0
/* 800DDB4C 000D906C  2C 03 00 00 */	cmpwi r3, 0
/* 800DDB50 000D9070  41 82 00 1C */	beq lbl_800DDB6C
/* 800DDB54 000D9074  81 83 00 00 */	lwz r12, 0(r3)
/* 800DDB58 000D9078  7F C3 F3 78 */	mr r3, r30
/* 800DDB5C 000D907C  7D 89 03 A6 */	mtctr r12
/* 800DDB60 000D9080  4E 80 04 21 */	bctrl 
/* 800DDB64 000D9084  7C 7F 1B 78 */	mr r31, r3
/* 800DDB68 000D9088  48 00 00 24 */	b lbl_800DDB8C
lbl_800DDB6C:
/* 800DDB6C 000D908C  88 0D 93 20 */	lbz r0, lbl_802477A0@sda21(r13)
/* 800DDB70 000D9090  28 00 00 02 */	cmplwi r0, 2
/* 800DDB74 000D9094  41 80 00 18 */	blt lbl_800DDB8C
/* 800DDB78 000D9098  3C 80 80 1A */	lis r4, lbl_8019B13C@ha
/* 800DDB7C 000D909C  54 A5 06 3E */	clrlwi r5, r5, 0x18
/* 800DDB80 000D90A0  38 84 B1 3C */	addi r4, r4, lbl_8019B13C@l
/* 800DDB84 000D90A4  38 60 05 01 */	li r3, 0x501
/* 800DDB88 000D90A8  4B FF F5 7D */	bl LogMsg_1
lbl_800DDB8C:
/* 800DDB8C 000D90AC  57 E0 06 3F */	clrlwi. r0, r31, 0x18
/* 800DDB90 000D90B0  41 82 00 0C */	beq lbl_800DDB9C
/* 800DDB94 000D90B4  7F C3 F3 78 */	mr r3, r30
/* 800DDB98 000D90B8  4B FF C3 79 */	bl GKI_freebuf
lbl_800DDB9C:
/* 800DDB9C 000D90BC  80 01 00 14 */	lwz r0, 0x14(r1)
/* 800DDBA0 000D90C0  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 800DDBA4 000D90C4  83 C1 00 08 */	lwz r30, 8(r1)
/* 800DDBA8 000D90C8  7C 08 03 A6 */	mtlr r0
/* 800DDBAC 000D90CC  38 21 00 10 */	addi r1, r1, 0x10
/* 800DDBB0 000D90D0  4E 80 00 20 */	blr 

glabel bta_sys_timer_update
/* 800DDBB4 000D90D4  3C 60 80 22 */	lis r3, lbl_802200B8@ha
/* 800DDBB8 000D90D8  38 63 00 B8 */	addi r3, r3, lbl_802200B8@l
/* 800DDBBC 000D90DC  88 03 00 7C */	lbz r0, 0x7c(r3)
/* 800DDBC0 000D90E0  2C 00 00 00 */	cmpwi r0, 0
/* 800DDBC4 000D90E4  4C 82 00 20 */	bnelr 
/* 800DDBC8 000D90E8  38 63 00 68 */	addi r3, r3, 0x68
/* 800DDBCC 000D90EC  48 00 01 28 */	b ptim_timer_update
/* 800DDBD0 000D90F0  4E 80 00 20 */	blr 

glabel bta_sys_register
/* 800DDBD4 000D90F4  3C A0 80 22 */	lis r5, lbl_802200B8@ha
/* 800DDBD8 000D90F8  54 60 15 BA */	rlwinm r0, r3, 2, 0x16, 0x1d
/* 800DDBDC 000D90FC  38 A5 00 B8 */	addi r5, r5, lbl_802200B8@l
/* 800DDBE0 000D9100  7C 85 01 2E */	stwx r4, r5, r0
/* 800DDBE4 000D9104  4E 80 00 20 */	blr 

glabel bta_sys_sendmsg
/* 800DDBE8 000D9108  80 8D 86 10 */	lwz r4, lbl_80246A90@sda21(r13)
/* 800DDBEC 000D910C  3C C0 80 22 */	lis r6, lbl_802200B8@ha
/* 800DDBF0 000D9110  38 C6 00 B8 */	addi r6, r6, lbl_802200B8@l
/* 800DDBF4 000D9114  7C 65 1B 78 */	mr r5, r3
/* 800DDBF8 000D9118  88 66 00 7D */	lbz r3, 0x7d(r6)
/* 800DDBFC 000D911C  88 84 00 02 */	lbz r4, 2(r4)
/* 800DDC00 000D9120  4B FF C4 C4 */	b GKI_send_msg

glabel bta_sys_start_timer
/* 800DDC04 000D9124  3C E0 80 22 */	lis r7, lbl_802200B8@ha
/* 800DDC08 000D9128  7C 80 23 78 */	mr r0, r4
/* 800DDC0C 000D912C  38 E7 00 B8 */	addi r7, r7, lbl_802200B8@l
/* 800DDC10 000D9130  7C A6 2B 78 */	mr r6, r5
/* 800DDC14 000D9134  7C 64 1B 78 */	mr r4, r3
/* 800DDC18 000D9138  7C 05 03 78 */	mr r5, r0
/* 800DDC1C 000D913C  38 67 00 68 */	addi r3, r7, 0x68
/* 800DDC20 000D9140  48 00 01 88 */	b ptim_start_timer

glabel bta_sys_stop_timer
/* 800DDC24 000D9144  3C A0 80 22 */	lis r5, lbl_802200B8@ha
/* 800DDC28 000D9148  7C 64 1B 78 */	mr r4, r3
/* 800DDC2C 000D914C  38 A5 00 B8 */	addi r5, r5, lbl_802200B8@l
/* 800DDC30 000D9150  38 65 00 68 */	addi r3, r5, 0x68
/* 800DDC34 000D9154  48 00 02 14 */	b prim_stop_timer

glabel bta_sys_disable
/* 800DDC38 000D9158  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 800DDC3C 000D915C  7C 08 02 A6 */	mflr r0
/* 800DDC40 000D9160  90 01 00 14 */	stw r0, 0x14(r1)
/* 800DDC44 000D9164  93 E1 00 0C */	stw r31, 0xc(r1)
/* 800DDC48 000D9168  3F E0 80 22 */	lis r31, lbl_802200B8@ha
/* 800DDC4C 000D916C  3B FF 00 B8 */	addi r31, r31, lbl_802200B8@l
/* 800DDC50 000D9170  93 C1 00 08 */	stw r30, 8(r1)
/* 800DDC54 000D9174  3B C0 00 00 */	li r30, 0
lbl_800DDC58:
/* 800DDC58 000D9178  80 7F 00 00 */	lwz r3, 0(r31)
/* 800DDC5C 000D917C  2C 03 00 00 */	cmpwi r3, 0
/* 800DDC60 000D9180  41 82 00 18 */	beq lbl_800DDC78
/* 800DDC64 000D9184  81 83 00 04 */	lwz r12, 4(r3)
/* 800DDC68 000D9188  2C 0C 00 00 */	cmpwi r12, 0
/* 800DDC6C 000D918C  41 82 00 0C */	beq lbl_800DDC78
/* 800DDC70 000D9190  7D 89 03 A6 */	mtctr r12
/* 800DDC74 000D9194  4E 80 04 21 */	bctrl 
lbl_800DDC78:
/* 800DDC78 000D9198  3B DE 00 01 */	addi r30, r30, 1
/* 800DDC7C 000D919C  3B FF 00 04 */	addi r31, r31, 4
/* 800DDC80 000D91A0  2C 1E 00 1A */	cmpwi r30, 0x1a
/* 800DDC84 000D91A4  41 80 FF D4 */	blt lbl_800DDC58
/* 800DDC88 000D91A8  80 01 00 14 */	lwz r0, 0x14(r1)
/* 800DDC8C 000D91AC  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 800DDC90 000D91B0  83 C1 00 08 */	lwz r30, 8(r1)
/* 800DDC94 000D91B4  7C 08 03 A6 */	mtlr r0
/* 800DDC98 000D91B8  38 21 00 10 */	addi r1, r1, 0x10
/* 800DDC9C 000D91BC  4E 80 00 20 */	blr 

glabel bta_sys_set_trace_level
/* 800DDCA0 000D91C0  98 6D 93 20 */	stb r3, lbl_802477A0@sda21(r13)
/* 800DDCA4 000D91C4  4E 80 00 20 */	blr 

.section .sbss, "wa" # 0x80246B60 - 0x80247800

glabel lbl_802477A0
	.skip 0x8