.include "macros.inc"

.section .text, "ax"

glabel ptim_init
/* 800DDCA8 000D91C8  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 800DDCAC 000D91CC  7C 08 02 A6 */	mflr r0
/* 800DDCB0 000D91D0  90 01 00 24 */	stw r0, 0x24(r1)
/* 800DDCB4 000D91D4  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 800DDCB8 000D91D8  7C BF 2B 78 */	mr r31, r5
/* 800DDCBC 000D91DC  93 C1 00 18 */	stw r30, 0x18(r1)
/* 800DDCC0 000D91E0  7C 9E 23 78 */	mr r30, r4
/* 800DDCC4 000D91E4  93 A1 00 14 */	stw r29, 0x14(r1)
/* 800DDCC8 000D91E8  7C 7D 1B 78 */	mr r29, r3
/* 800DDCCC 000D91EC  4B FF D1 C9 */	bl GKI_init_timer_list
/* 800DDCD0 000D91F0  93 DD 00 0C */	stw r30, 0xc(r29)
/* 800DDCD4 000D91F4  9B FD 00 10 */	stb r31, 0x10(r29)
/* 800DDCD8 000D91F8  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 800DDCDC 000D91FC  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 800DDCE0 000D9200  83 A1 00 14 */	lwz r29, 0x14(r1)
/* 800DDCE4 000D9204  80 01 00 24 */	lwz r0, 0x24(r1)
/* 800DDCE8 000D9208  7C 08 03 A6 */	mtlr r0
/* 800DDCEC 000D920C  38 21 00 20 */	addi r1, r1, 0x20
/* 800DDCF0 000D9210  4E 80 00 20 */	blr 

glabel ptim_timer_update
/* 800DDCF4 000D9214  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 800DDCF8 000D9218  7C 08 02 A6 */	mflr r0
/* 800DDCFC 000D921C  90 01 00 14 */	stw r0, 0x14(r1)
/* 800DDD00 000D9220  93 E1 00 0C */	stw r31, 0xc(r1)
/* 800DDD04 000D9224  93 C1 00 08 */	stw r30, 8(r1)
/* 800DDD08 000D9228  7C 7E 1B 78 */	mr r30, r3
/* 800DDD0C 000D922C  80 83 00 0C */	lwz r4, 0xc(r3)
/* 800DDD10 000D9230  4B FF D1 99 */	bl GKI_update_timer_list
/* 800DDD14 000D9234  48 00 00 54 */	b lbl_800DDD68
lbl_800DDD18:
/* 800DDD18 000D9238  7F C3 F3 78 */	mr r3, r30
/* 800DDD1C 000D923C  7F E4 FB 78 */	mr r4, r31
/* 800DDD20 000D9240  4B FF D3 01 */	bl GKI_remove_from_timer_list
/* 800DDD24 000D9244  81 9F 00 08 */	lwz r12, 8(r31)
/* 800DDD28 000D9248  2C 0C 00 00 */	cmpwi r12, 0
/* 800DDD2C 000D924C  41 82 00 14 */	beq lbl_800DDD40
/* 800DDD30 000D9250  7F E3 FB 78 */	mr r3, r31
/* 800DDD34 000D9254  7D 89 03 A6 */	mtctr r12
/* 800DDD38 000D9258  4E 80 04 21 */	bctrl 
/* 800DDD3C 000D925C  48 00 00 2C */	b lbl_800DDD68
lbl_800DDD40:
/* 800DDD40 000D9260  A0 1F 00 14 */	lhz r0, 0x14(r31)
/* 800DDD44 000D9264  2C 00 00 00 */	cmpwi r0, 0
/* 800DDD48 000D9268  41 82 00 20 */	beq lbl_800DDD68
/* 800DDD4C 000D926C  38 60 00 08 */	li r3, 8
/* 800DDD50 000D9270  4B FF BF 39 */	bl GKI_getbuf
/* 800DDD54 000D9274  2C 03 00 00 */	cmpwi r3, 0
/* 800DDD58 000D9278  41 82 00 10 */	beq lbl_800DDD68
/* 800DDD5C 000D927C  A0 1F 00 14 */	lhz r0, 0x14(r31)
/* 800DDD60 000D9280  B0 03 00 00 */	sth r0, 0(r3)
/* 800DDD64 000D9284  4B FF FE 85 */	bl bta_sys_sendmsg
lbl_800DDD68:
/* 800DDD68 000D9288  83 FE 00 00 */	lwz r31, 0(r30)
/* 800DDD6C 000D928C  2C 1F 00 00 */	cmpwi r31, 0
/* 800DDD70 000D9290  41 82 00 10 */	beq lbl_800DDD80
/* 800DDD74 000D9294  80 1F 00 0C */	lwz r0, 0xc(r31)
/* 800DDD78 000D9298  2C 00 00 00 */	cmpwi r0, 0
/* 800DDD7C 000D929C  40 81 FF 9C */	ble lbl_800DDD18
lbl_800DDD80:
/* 800DDD80 000D92A0  2C 1F 00 00 */	cmpwi r31, 0
/* 800DDD84 000D92A4  40 82 00 0C */	bne lbl_800DDD90
/* 800DDD88 000D92A8  88 7E 00 10 */	lbz r3, 0x10(r30)
/* 800DDD8C 000D92AC  4B FF D0 81 */	bl GKI_stop_timer
lbl_800DDD90:
/* 800DDD90 000D92B0  80 01 00 14 */	lwz r0, 0x14(r1)
/* 800DDD94 000D92B4  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 800DDD98 000D92B8  83 C1 00 08 */	lwz r30, 8(r1)
/* 800DDD9C 000D92BC  7C 08 03 A6 */	mtlr r0
/* 800DDDA0 000D92C0  38 21 00 10 */	addi r1, r1, 0x10
/* 800DDDA4 000D92C4  4E 80 00 20 */	blr 

glabel ptim_start_timer
/* 800DDDA8 000D92C8  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 800DDDAC 000D92CC  7C 08 02 A6 */	mflr r0
/* 800DDDB0 000D92D0  90 01 00 24 */	stw r0, 0x24(r1)
/* 800DDDB4 000D92D4  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 800DDDB8 000D92D8  7C DF 33 78 */	mr r31, r6
/* 800DDDBC 000D92DC  93 C1 00 18 */	stw r30, 0x18(r1)
/* 800DDDC0 000D92E0  7C BE 2B 78 */	mr r30, r5
/* 800DDDC4 000D92E4  93 A1 00 14 */	stw r29, 0x14(r1)
/* 800DDDC8 000D92E8  7C 9D 23 78 */	mr r29, r4
/* 800DDDCC 000D92EC  93 81 00 10 */	stw r28, 0x10(r1)
/* 800DDDD0 000D92F0  7C 7C 1B 78 */	mr r28, r3
/* 800DDDD4 000D92F4  80 03 00 00 */	lwz r0, 0(r3)
/* 800DDDD8 000D92F8  2C 00 00 00 */	cmpwi r0, 0
/* 800DDDDC 000D92FC  40 82 00 2C */	bne lbl_800DDE08
/* 800DDDE0 000D9300  3C 80 66 66 */	lis r4, 0x66666667@ha
/* 800DDDE4 000D9304  80 1C 00 0C */	lwz r0, 0xc(r28)
/* 800DDDE8 000D9308  38 84 66 67 */	addi r4, r4, 0x66666667@l
/* 800DDDEC 000D930C  88 63 00 10 */	lbz r3, 0x10(r3)
/* 800DDDF0 000D9310  7C 04 00 96 */	mulhw r0, r4, r0
/* 800DDDF4 000D9314  38 A0 00 01 */	li r5, 1
/* 800DDDF8 000D9318  7C 00 16 70 */	srawi r0, r0, 2
/* 800DDDFC 000D931C  54 04 0F FE */	srwi r4, r0, 0x1f
/* 800DDE00 000D9320  7C 80 22 14 */	add r4, r0, r4
/* 800DDE04 000D9324  4B FF CE B9 */	bl GKI_start_timer
lbl_800DDE08:
/* 800DDE08 000D9328  7F 83 E3 78 */	mr r3, r28
/* 800DDE0C 000D932C  7F A4 EB 78 */	mr r4, r29
/* 800DDE10 000D9330  4B FF D2 11 */	bl GKI_remove_from_timer_list
/* 800DDE14 000D9334  B3 DD 00 14 */	sth r30, 0x14(r29)
/* 800DDE18 000D9338  7F 83 E3 78 */	mr r3, r28
/* 800DDE1C 000D933C  7F A4 EB 78 */	mr r4, r29
/* 800DDE20 000D9340  93 FD 00 0C */	stw r31, 0xc(r29)
/* 800DDE24 000D9344  4B FF D1 11 */	bl GKI_add_to_timer_list
/* 800DDE28 000D9348  80 01 00 24 */	lwz r0, 0x24(r1)
/* 800DDE2C 000D934C  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 800DDE30 000D9350  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 800DDE34 000D9354  83 A1 00 14 */	lwz r29, 0x14(r1)
/* 800DDE38 000D9358  83 81 00 10 */	lwz r28, 0x10(r1)
/* 800DDE3C 000D935C  7C 08 03 A6 */	mtlr r0
/* 800DDE40 000D9360  38 21 00 20 */	addi r1, r1, 0x20
/* 800DDE44 000D9364  4E 80 00 20 */	blr 

glabel prim_stop_timer
/* 800DDE48 000D9368  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 800DDE4C 000D936C  7C 08 02 A6 */	mflr r0
/* 800DDE50 000D9370  90 01 00 14 */	stw r0, 0x14(r1)
/* 800DDE54 000D9374  93 E1 00 0C */	stw r31, 0xc(r1)
/* 800DDE58 000D9378  7C 7F 1B 78 */	mr r31, r3
/* 800DDE5C 000D937C  4B FF D1 C5 */	bl GKI_remove_from_timer_list
/* 800DDE60 000D9380  80 1F 00 00 */	lwz r0, 0(r31)
/* 800DDE64 000D9384  2C 00 00 00 */	cmpwi r0, 0
/* 800DDE68 000D9388  40 82 00 0C */	bne lbl_800DDE74
/* 800DDE6C 000D938C  88 7F 00 10 */	lbz r3, 0x10(r31)
/* 800DDE70 000D9390  4B FF CF 9D */	bl GKI_stop_timer
lbl_800DDE74:
/* 800DDE74 000D9394  80 01 00 14 */	lwz r0, 0x14(r1)
/* 800DDE78 000D9398  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 800DDE7C 000D939C  7C 08 03 A6 */	mtlr r0
/* 800DDE80 000D93A0  38 21 00 10 */	addi r1, r1, 0x10
/* 800DDE84 000D93A4  4E 80 00 20 */	blr 
