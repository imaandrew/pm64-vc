.include "macros.inc"

.section .text, "ax"

glabel OSGetPhysicalMem1Size
/* 80095C54 00091174  3C 60 80 00 */	lis r3, 0x80003100@ha
/* 80095C58 00091178  80 63 31 00 */	lwz r3, 0x80003100@l(r3)
/* 80095C5C 0009117C  4E 80 00 20 */	blr

glabel OSGetPhysicalMem2Size
/* 80095C60 00091180  3C 60 80 00 */	lis r3, 0x80003118@ha
/* 80095C64 00091184  80 63 31 18 */	lwz r3, 0x80003118@l(r3)
/* 80095C68 00091188  4E 80 00 20 */	blr

glabel OSGetConsoleSimulatedMem1Size
/* 80095C6C 0009118C  3C 60 80 00 */	lis r3, 0x80003104@ha
/* 80095C70 00091190  80 63 31 04 */	lwz r3, 0x80003104@l(r3)
/* 80095C74 00091194  4E 80 00 20 */	blr

glabel OSGetConsoleSimulatedMem2Size
/* 80095C78 00091198  3C 60 80 00 */	lis r3, 0x8000311C@ha
/* 80095C7C 0009119C  80 63 31 1C */	lwz r3, 0x8000311C@l(r3)
/* 80095C80 000911A0  4E 80 00 20 */	blr

glabel OSOnShutdown
/* 80095C84 000911A4  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 80095C88 000911A8  7C 08 02 A6 */	mflr r0
/* 80095C8C 000911AC  2C 03 00 00 */	cmpwi r3, 0
/* 80095C90 000911B0  90 01 00 14 */	stw r0, 0x14(r1)
/* 80095C94 000911B4  41 82 00 18 */	beq .L_80095CAC
/* 80095C98 000911B8  38 00 00 FF */	li r0, 0xff
/* 80095C9C 000911BC  3C 60 CC 00 */	lis r3, 0xCC004010@ha
/* 80095CA0 000911C0  B0 03 40 10 */	sth r0, 0xCC004010@l(r3)
/* 80095CA4 000911C4  3C 60 F0 00 */	lis r3, 0xf000
/* 80095CA8 000911C8  4B FF F9 9D */	bl __OSMaskInterrupts
.L_80095CAC:
/* 80095CAC 000911CC  80 01 00 14 */	lwz r0, 0x14(r1)
/* 80095CB0 000911D0  38 60 00 01 */	li r3, 1
/* 80095CB4 000911D4  7C 08 03 A6 */	mtlr r0
/* 80095CB8 000911D8  38 21 00 10 */	addi r1, r1, 0x10
/* 80095CBC 000911DC  4E 80 00 20 */	blr

glabel MEMIntrruptHandler
/* 80095CC0 000911E0  3D 00 CC 00 */	lis r8, 0xCC00401E@ha
/* 80095CC4 000911E4  3C 60 80 1B */	lis r3, lbl_801B3E50@ha
/* 80095CC8 000911E8  A0 A8 40 1E */	lhz r5, 0xCC00401E@l(r8)
/* 80095CCC 000911EC  38 00 00 00 */	li r0, 0
/* 80095CD0 000911F0  A0 E8 40 24 */	lhz r7, 0x4024(r8)
/* 80095CD4 000911F4  38 63 3E 50 */	addi r3, r3, lbl_801B3E50@l
/* 80095CD8 000911F8  A0 C8 40 22 */	lhz r6, 0x4022(r8)
/* 80095CDC 000911FC  50 E6 81 9E */	rlwimi r6, r7, 0x10, 6, 0xf
/* 80095CE0 00091200  B0 08 40 20 */	sth r0, 0x4020(r8)
/* 80095CE4 00091204  81 83 00 3C */	lwz r12, 0x3c(r3)
/* 80095CE8 00091208  2C 0C 00 00 */	cmpwi r12, 0
/* 80095CEC 0009120C  41 82 00 14 */	beq .L_80095D00
/* 80095CF0 00091210  38 60 00 0F */	li r3, 0xf
/* 80095CF4 00091214  4C C6 31 82 */	crclr 6
/* 80095CF8 00091218  7D 89 03 A6 */	mtctr r12
/* 80095CFC 0009121C  4E 80 04 20 */	bctr
.L_80095D00:
/* 80095D00 00091220  38 60 00 0F */	li r3, 0xf
/* 80095D04 00091224  4B FF BF EC */	b __OSUnhandledException

glabel ConfigMEM1_24MB
/* 80095D08 00091228  38 E0 00 00 */	li r7, 0
/* 80095D0C 0009122C  3C 80 00 00 */	lis r4, 0x00000002@ha
/* 80095D10 00091230  38 84 00 02 */	addi r4, r4, 0x00000002@l
/* 80095D14 00091234  3C 60 80 00 */	lis r3, 0x800001FF@ha
/* 80095D18 00091238  38 63 01 FF */	addi r3, r3, 0x800001FF@l
/* 80095D1C 0009123C  3C C0 01 00 */	lis r6, 0x01000002@ha
/* 80095D20 00091240  38 C6 00 02 */	addi r6, r6, 0x01000002@l
/* 80095D24 00091244  3C A0 81 00 */	lis r5, 0x810000FF@ha
/* 80095D28 00091248  38 A5 00 FF */	addi r5, r5, 0x810000FF@l
/* 80095D2C 0009124C  4C 00 01 2C */	isync
/* 80095D30 00091250  7C F8 83 A6 */	mtdbatu 0, r7
/* 80095D34 00091254  7C 99 83 A6 */	mtdbatl 0, r4
/* 80095D38 00091258  7C 78 83 A6 */	mtdbatu 0, r3
/* 80095D3C 0009125C  4C 00 01 2C */	isync
/* 80095D40 00091260  7C F0 83 A6 */	mtibatu 0, r7
/* 80095D44 00091264  7C 91 83 A6 */	mtibatl 0, r4
/* 80095D48 00091268  7C 70 83 A6 */	mtibatu 0, r3
/* 80095D4C 0009126C  4C 00 01 2C */	isync
/* 80095D50 00091270  7C FC 83 A6 */	mtdbatu 2, r7
/* 80095D54 00091274  7C DD 83 A6 */	mtdbatl 2, r6
/* 80095D58 00091278  7C BC 83 A6 */	mtdbatu 2, r5
/* 80095D5C 0009127C  4C 00 01 2C */	isync
/* 80095D60 00091280  7C F4 83 A6 */	mtibatu 2, r7
/* 80095D64 00091284  7C D5 83 A6 */	mtibatl 2, r6
/* 80095D68 00091288  7C B4 83 A6 */	mtibatu 2, r5
/* 80095D6C 0009128C  4C 00 01 2C */	isync
/* 80095D70 00091290  7C 60 00 A6 */	mfmsr r3
/* 80095D74 00091294  60 63 00 30 */	ori r3, r3, 0x30
/* 80095D78 00091298  7C 7B 03 A6 */	mtspr 0x1b, r3
/* 80095D7C 0009129C  7C 68 02 A6 */	mflr r3
/* 80095D80 000912A0  7C 7A 03 A6 */	mtspr 0x1a, r3
/* 80095D84 000912A4  4C 00 00 64 */	rfi

glabel ConfigMEM1_48MB
/* 80095D88 000912A8  38 E0 00 00 */	li r7, 0
/* 80095D8C 000912AC  3C 80 00 00 */	lis r4, 0x00000002@ha
/* 80095D90 000912B0  38 84 00 02 */	addi r4, r4, 0x00000002@l
/* 80095D94 000912B4  3C 60 80 00 */	lis r3, 0x800003FF@ha
/* 80095D98 000912B8  38 63 03 FF */	addi r3, r3, 0x800003FF@l
/* 80095D9C 000912BC  3C C0 02 00 */	lis r6, 0x02000002@ha
/* 80095DA0 000912C0  38 C6 00 02 */	addi r6, r6, 0x02000002@l
/* 80095DA4 000912C4  3C A0 82 00 */	lis r5, 0x820001FF@ha
/* 80095DA8 000912C8  38 A5 01 FF */	addi r5, r5, 0x820001FF@l
/* 80095DAC 000912CC  4C 00 01 2C */	isync
/* 80095DB0 000912D0  7C F8 83 A6 */	mtdbatu 0, r7
/* 80095DB4 000912D4  7C 99 83 A6 */	mtdbatl 0, r4
/* 80095DB8 000912D8  7C 78 83 A6 */	mtdbatu 0, r3
/* 80095DBC 000912DC  4C 00 01 2C */	isync
/* 80095DC0 000912E0  7C F0 83 A6 */	mtibatu 0, r7
/* 80095DC4 000912E4  7C 91 83 A6 */	mtibatl 0, r4
/* 80095DC8 000912E8  7C 70 83 A6 */	mtibatu 0, r3
/* 80095DCC 000912EC  4C 00 01 2C */	isync
/* 80095DD0 000912F0  7C FC 83 A6 */	mtdbatu 2, r7
/* 80095DD4 000912F4  7C DD 83 A6 */	mtdbatl 2, r6
/* 80095DD8 000912F8  7C BC 83 A6 */	mtdbatu 2, r5
/* 80095DDC 000912FC  4C 00 01 2C */	isync
/* 80095DE0 00091300  7C F4 83 A6 */	mtibatu 2, r7
/* 80095DE4 00091304  7C D5 83 A6 */	mtibatl 2, r6
/* 80095DE8 00091308  7C B4 83 A6 */	mtibatu 2, r5
/* 80095DEC 0009130C  4C 00 01 2C */	isync
/* 80095DF0 00091310  7C 60 00 A6 */	mfmsr r3
/* 80095DF4 00091314  60 63 00 30 */	ori r3, r3, 0x30
/* 80095DF8 00091318  7C 7B 03 A6 */	mtspr 0x1b, r3
/* 80095DFC 0009131C  7C 68 02 A6 */	mflr r3
/* 80095E00 00091320  7C 7A 03 A6 */	mtspr 0x1a, r3
/* 80095E04 00091324  4C 00 00 64 */	rfi

glabel ConfigMEM2_52MB
/* 80095E08 00091328  38 E0 00 00 */	li r7, 0
/* 80095E0C 0009132C  3C 80 10 00 */	lis r4, 0x10000002@ha
/* 80095E10 00091330  38 84 00 02 */	addi r4, r4, 0x10000002@l
/* 80095E14 00091334  3C 60 90 00 */	lis r3, 0x900003FF@ha
/* 80095E18 00091338  38 63 03 FF */	addi r3, r3, 0x900003FF@l
/* 80095E1C 0009133C  3C C0 10 00 */	lis r6, 0x1000002A@ha
/* 80095E20 00091340  38 C6 00 2A */	addi r6, r6, 0x1000002A@l
/* 80095E24 00091344  3C A0 D0 00 */	lis r5, 0xD00007FF@ha
/* 80095E28 00091348  38 A5 07 FF */	addi r5, r5, 0xD00007FF@l
/* 80095E2C 0009134C  4C 00 01 2C */	isync
/* 80095E30 00091350  7C F8 8B A6 */	mtspr 0x238, r7
/* 80095E34 00091354  7C 99 8B A6 */	mtspr 0x239, r4
/* 80095E38 00091358  7C 78 8B A6 */	mtspr 0x238, r3
/* 80095E3C 0009135C  4C 00 01 2C */	isync
/* 80095E40 00091360  7C F0 8B A6 */	mtspr 0x230, r7
/* 80095E44 00091364  7C 91 8B A6 */	mtspr 0x231, r4
/* 80095E48 00091368  7C 70 8B A6 */	mtspr 0x230, r3
/* 80095E4C 0009136C  4C 00 01 2C */	isync
/* 80095E50 00091370  7C FA 8B A6 */	mtspr 0x23a, r7
/* 80095E54 00091374  7C DB 8B A6 */	mtspr 0x23b, r6
/* 80095E58 00091378  7C BA 8B A6 */	mtspr 0x23a, r5
/* 80095E5C 0009137C  4C 00 01 2C */	isync
/* 80095E60 00091380  7C F2 8B A6 */	mtspr 0x232, r7
/* 80095E64 00091384  7C F3 8B A6 */	mtspr 0x233, r7
/* 80095E68 00091388  4C 00 01 2C */	isync
/* 80095E6C 0009138C  3C 80 12 00 */	lis r4, 0x12000002@ha
/* 80095E70 00091390  38 84 00 02 */	addi r4, r4, 0x12000002@l
/* 80095E74 00091394  3C 60 92 00 */	lis r3, 0x920001FF@ha
/* 80095E78 00091398  38 63 01 FF */	addi r3, r3, 0x920001FF@l
/* 80095E7C 0009139C  3C C0 13 00 */	lis r6, 0x13000002@ha
/* 80095E80 000913A0  38 C6 00 02 */	addi r6, r6, 0x13000002@l
/* 80095E84 000913A4  3C A0 93 00 */	lis r5, 0x9300007F@ha
/* 80095E88 000913A8  38 A5 00 7F */	addi r5, r5, 0x9300007F@l
/* 80095E8C 000913AC  4C 00 01 2C */	isync
/* 80095E90 000913B0  7C FC 8B A6 */	mtspr 0x23c, r7
/* 80095E94 000913B4  7C 9D 8B A6 */	mtspr 0x23d, r4
/* 80095E98 000913B8  7C 7C 8B A6 */	mtspr 0x23c, r3
/* 80095E9C 000913BC  4C 00 01 2C */	isync
/* 80095EA0 000913C0  7C F4 8B A6 */	mtspr 0x234, r7
/* 80095EA4 000913C4  7C 95 8B A6 */	mtspr 0x235, r4
/* 80095EA8 000913C8  7C 74 8B A6 */	mtspr 0x234, r3
/* 80095EAC 000913CC  4C 00 01 2C */	isync
/* 80095EB0 000913D0  7C FE 8B A6 */	mtspr 0x23e, r7
/* 80095EB4 000913D4  7C DF 8B A6 */	mtspr 0x23f, r6
/* 80095EB8 000913D8  7C BE 8B A6 */	mtspr 0x23e, r5
/* 80095EBC 000913DC  4C 00 01 2C */	isync
/* 80095EC0 000913E0  7C F6 8B A6 */	mtspr 0x236, r7
/* 80095EC4 000913E4  7C D7 8B A6 */	mtspr 0x237, r6
/* 80095EC8 000913E8  7C B6 8B A6 */	mtspr 0x236, r5
/* 80095ECC 000913EC  4C 00 01 2C */	isync
/* 80095ED0 000913F0  7C 60 00 A6 */	mfmsr r3
/* 80095ED4 000913F4  60 63 00 30 */	ori r3, r3, 0x30
/* 80095ED8 000913F8  7C 7B 03 A6 */	mtspr 0x1b, r3
/* 80095EDC 000913FC  7C 68 02 A6 */	mflr r3
/* 80095EE0 00091400  7C 7A 03 A6 */	mtspr 0x1a, r3
/* 80095EE4 00091404  4C 00 00 64 */	rfi

glabel ConfigMEM2_56MB
/* 80095EE8 00091408  38 E0 00 00 */	li r7, 0
/* 80095EEC 0009140C  3C 80 10 00 */	lis r4, 0x10000002@ha
/* 80095EF0 00091410  38 84 00 02 */	addi r4, r4, 0x10000002@l
/* 80095EF4 00091414  3C 60 90 00 */	lis r3, 0x900003FF@ha
/* 80095EF8 00091418  38 63 03 FF */	addi r3, r3, 0x900003FF@l
/* 80095EFC 0009141C  3C C0 10 00 */	lis r6, 0x1000002A@ha
/* 80095F00 00091420  38 C6 00 2A */	addi r6, r6, 0x1000002A@l
/* 80095F04 00091424  3C A0 D0 00 */	lis r5, 0xD00007FF@ha
/* 80095F08 00091428  38 A5 07 FF */	addi r5, r5, 0xD00007FF@l
/* 80095F0C 0009142C  4C 00 01 2C */	isync
/* 80095F10 00091430  7C F8 8B A6 */	mtspr 0x238, r7
/* 80095F14 00091434  7C 99 8B A6 */	mtspr 0x239, r4
/* 80095F18 00091438  7C 78 8B A6 */	mtspr 0x238, r3
/* 80095F1C 0009143C  4C 00 01 2C */	isync
/* 80095F20 00091440  7C F0 8B A6 */	mtspr 0x230, r7
/* 80095F24 00091444  7C 91 8B A6 */	mtspr 0x231, r4
/* 80095F28 00091448  7C 70 8B A6 */	mtspr 0x230, r3
/* 80095F2C 0009144C  4C 00 01 2C */	isync
/* 80095F30 00091450  7C FA 8B A6 */	mtspr 0x23a, r7
/* 80095F34 00091454  7C DB 8B A6 */	mtspr 0x23b, r6
/* 80095F38 00091458  7C BA 8B A6 */	mtspr 0x23a, r5
/* 80095F3C 0009145C  4C 00 01 2C */	isync
/* 80095F40 00091460  7C F2 8B A6 */	mtspr 0x232, r7
/* 80095F44 00091464  7C F3 8B A6 */	mtspr 0x233, r7
/* 80095F48 00091468  4C 00 01 2C */	isync
/* 80095F4C 0009146C  3C 80 12 00 */	lis r4, 0x12000002@ha
/* 80095F50 00091470  38 84 00 02 */	addi r4, r4, 0x12000002@l
/* 80095F54 00091474  3C 60 92 00 */	lis r3, 0x920001FF@ha
/* 80095F58 00091478  38 63 01 FF */	addi r3, r3, 0x920001FF@l
/* 80095F5C 0009147C  3C C0 13 00 */	lis r6, 0x13000002@ha
/* 80095F60 00091480  38 C6 00 02 */	addi r6, r6, 0x13000002@l
/* 80095F64 00091484  3C A0 93 00 */	lis r5, 0x930000FF@ha
/* 80095F68 00091488  38 A5 00 FF */	addi r5, r5, 0x930000FF@l
/* 80095F6C 0009148C  4C 00 01 2C */	isync
/* 80095F70 00091490  7C FC 8B A6 */	mtspr 0x23c, r7
/* 80095F74 00091494  7C 9D 8B A6 */	mtspr 0x23d, r4
/* 80095F78 00091498  7C 7C 8B A6 */	mtspr 0x23c, r3
/* 80095F7C 0009149C  4C 00 01 2C */	isync
/* 80095F80 000914A0  7C F4 8B A6 */	mtspr 0x234, r7
/* 80095F84 000914A4  7C 95 8B A6 */	mtspr 0x235, r4
/* 80095F88 000914A8  7C 74 8B A6 */	mtspr 0x234, r3
/* 80095F8C 000914AC  4C 00 01 2C */	isync
/* 80095F90 000914B0  7C FE 8B A6 */	mtspr 0x23e, r7
/* 80095F94 000914B4  7C DF 8B A6 */	mtspr 0x23f, r6
/* 80095F98 000914B8  7C BE 8B A6 */	mtspr 0x23e, r5
/* 80095F9C 000914BC  4C 00 01 2C */	isync
/* 80095FA0 000914C0  7C F6 8B A6 */	mtspr 0x236, r7
/* 80095FA4 000914C4  7C D7 8B A6 */	mtspr 0x237, r6
/* 80095FA8 000914C8  7C B6 8B A6 */	mtspr 0x236, r5
/* 80095FAC 000914CC  4C 00 01 2C */	isync
/* 80095FB0 000914D0  7C 60 00 A6 */	mfmsr r3
/* 80095FB4 000914D4  60 63 00 30 */	ori r3, r3, 0x30
/* 80095FB8 000914D8  7C 7B 03 A6 */	mtspr 0x1b, r3
/* 80095FBC 000914DC  7C 68 02 A6 */	mflr r3
/* 80095FC0 000914E0  7C 7A 03 A6 */	mtspr 0x1a, r3
/* 80095FC4 000914E4  4C 00 00 64 */	rfi

glabel ConfigMEM2_64MB
/* 80095FC8 000914E8  38 E0 00 00 */	li r7, 0
/* 80095FCC 000914EC  3C 80 10 00 */	lis r4, 0x10000002@ha
/* 80095FD0 000914F0  38 84 00 02 */	addi r4, r4, 0x10000002@l
/* 80095FD4 000914F4  3C 60 90 00 */	lis r3, 0x900007FF@ha
/* 80095FD8 000914F8  38 63 07 FF */	addi r3, r3, 0x900007FF@l
/* 80095FDC 000914FC  3C C0 10 00 */	lis r6, 0x1000002A@ha
/* 80095FE0 00091500  38 C6 00 2A */	addi r6, r6, 0x1000002A@l
/* 80095FE4 00091504  3C A0 D0 00 */	lis r5, 0xD00007FF@ha
/* 80095FE8 00091508  38 A5 07 FF */	addi r5, r5, 0xD00007FF@l
/* 80095FEC 0009150C  4C 00 01 2C */	isync
/* 80095FF0 00091510  7C F8 8B A6 */	mtspr 0x238, r7
/* 80095FF4 00091514  7C 99 8B A6 */	mtspr 0x239, r4
/* 80095FF8 00091518  7C 78 8B A6 */	mtspr 0x238, r3
/* 80095FFC 0009151C  4C 00 01 2C */	isync
/* 80096000 00091520  7C F0 8B A6 */	mtspr 0x230, r7
/* 80096004 00091524  7C 91 8B A6 */	mtspr 0x231, r4
/* 80096008 00091528  7C 70 8B A6 */	mtspr 0x230, r3
/* 8009600C 0009152C  4C 00 01 2C */	isync
/* 80096010 00091530  7C FA 8B A6 */	mtspr 0x23a, r7
/* 80096014 00091534  7C DB 8B A6 */	mtspr 0x23b, r6
/* 80096018 00091538  7C BA 8B A6 */	mtspr 0x23a, r5
/* 8009601C 0009153C  4C 00 01 2C */	isync
/* 80096020 00091540  7C F2 8B A6 */	mtspr 0x232, r7
/* 80096024 00091544  7C F3 8B A6 */	mtspr 0x233, r7
/* 80096028 00091548  4C 00 01 2C */	isync
/* 8009602C 0009154C  7C F4 8B A6 */	mtspr 0x234, r7
/* 80096030 00091550  7C F5 8B A6 */	mtspr 0x235, r7
/* 80096034 00091554  4C 00 01 2C */	isync
/* 80096038 00091558  7C F6 8B A6 */	mtspr 0x236, r7
/* 8009603C 0009155C  7C F7 8B A6 */	mtspr 0x237, r7
/* 80096040 00091560  4C 00 01 2C */	isync
/* 80096044 00091564  7C FC 8B A6 */	mtspr 0x23c, r7
/* 80096048 00091568  7C FD 8B A6 */	mtspr 0x23d, r7
/* 8009604C 0009156C  4C 00 01 2C */	isync
/* 80096050 00091570  7C FE 8B A6 */	mtspr 0x23e, r7
/* 80096054 00091574  7C FF 8B A6 */	mtspr 0x23f, r7
/* 80096058 00091578  4C 00 01 2C */	isync
/* 8009605C 0009157C  7C 60 00 A6 */	mfmsr r3
/* 80096060 00091580  60 63 00 30 */	ori r3, r3, 0x30
/* 80096064 00091584  7C 7B 03 A6 */	mtspr 0x1b, r3
/* 80096068 00091588  7C 68 02 A6 */	mflr r3
/* 8009606C 0009158C  7C 7A 03 A6 */	mtspr 0x1a, r3
/* 80096070 00091590  4C 00 00 64 */	rfi

glabel ConfigMEM2_112MB
/* 80096074 00091594  38 E0 00 00 */	li r7, 0
/* 80096078 00091598  3C 80 10 00 */	lis r4, 0x10000002@ha
/* 8009607C 0009159C  38 84 00 02 */	addi r4, r4, 0x10000002@l
/* 80096080 000915A0  3C 60 90 00 */	lis r3, 0x900007FF@ha
/* 80096084 000915A4  38 63 07 FF */	addi r3, r3, 0x900007FF@l
/* 80096088 000915A8  3C C0 10 00 */	lis r6, 0x1000002A@ha
/* 8009608C 000915AC  38 C6 00 2A */	addi r6, r6, 0x1000002A@l
/* 80096090 000915B0  3C A0 D0 00 */	lis r5, 0xD0000FFF@ha
/* 80096094 000915B4  38 A5 0F FF */	addi r5, r5, 0xD0000FFF@l
/* 80096098 000915B8  4C 00 01 2C */	isync
/* 8009609C 000915BC  7C F8 8B A6 */	mtspr 0x238, r7
/* 800960A0 000915C0  7C 99 8B A6 */	mtspr 0x239, r4
/* 800960A4 000915C4  7C 78 8B A6 */	mtspr 0x238, r3
/* 800960A8 000915C8  4C 00 01 2C */	isync
/* 800960AC 000915CC  7C F0 8B A6 */	mtspr 0x230, r7
/* 800960B0 000915D0  7C 91 8B A6 */	mtspr 0x231, r4
/* 800960B4 000915D4  7C 70 8B A6 */	mtspr 0x230, r3
/* 800960B8 000915D8  4C 00 01 2C */	isync
/* 800960BC 000915DC  7C FA 8B A6 */	mtspr 0x23a, r7
/* 800960C0 000915E0  7C DB 8B A6 */	mtspr 0x23b, r6
/* 800960C4 000915E4  7C BA 8B A6 */	mtspr 0x23a, r5
/* 800960C8 000915E8  4C 00 01 2C */	isync
/* 800960CC 000915EC  7C F2 8B A6 */	mtspr 0x232, r7
/* 800960D0 000915F0  7C F3 8B A6 */	mtspr 0x233, r7
/* 800960D4 000915F4  4C 00 01 2C */	isync
/* 800960D8 000915F8  3C 80 14 00 */	lis r4, 0x14000002@ha
/* 800960DC 000915FC  38 84 00 02 */	addi r4, r4, 0x14000002@l
/* 800960E0 00091600  3C 60 94 00 */	lis r3, 0x940003FF@ha
/* 800960E4 00091604  38 63 03 FF */	addi r3, r3, 0x940003FF@l
/* 800960E8 00091608  3C C0 16 00 */	lis r6, 0x16000002@ha
/* 800960EC 0009160C  38 C6 00 02 */	addi r6, r6, 0x16000002@l
/* 800960F0 00091610  3C A0 96 00 */	lis r5, 0x960001FF@ha
/* 800960F4 00091614  38 A5 01 FF */	addi r5, r5, 0x960001FF@l
/* 800960F8 00091618  4C 00 01 2C */	isync
/* 800960FC 0009161C  7C FC 8B A6 */	mtspr 0x23c, r7
/* 80096100 00091620  7C 9D 8B A6 */	mtspr 0x23d, r4
/* 80096104 00091624  7C 7C 8B A6 */	mtspr 0x23c, r3
/* 80096108 00091628  4C 00 01 2C */	isync
/* 8009610C 0009162C  7C F4 8B A6 */	mtspr 0x234, r7
/* 80096110 00091630  7C 95 8B A6 */	mtspr 0x235, r4
/* 80096114 00091634  7C 74 8B A6 */	mtspr 0x234, r3
/* 80096118 00091638  4C 00 01 2C */	isync
/* 8009611C 0009163C  7C FE 8B A6 */	mtspr 0x23e, r7
/* 80096120 00091640  7C DF 8B A6 */	mtspr 0x23f, r6
/* 80096124 00091644  7C BE 8B A6 */	mtspr 0x23e, r5
/* 80096128 00091648  4C 00 01 2C */	isync
/* 8009612C 0009164C  7C F6 8B A6 */	mtspr 0x236, r7
/* 80096130 00091650  7C D7 8B A6 */	mtspr 0x237, r6
/* 80096134 00091654  7C B6 8B A6 */	mtspr 0x236, r5
/* 80096138 00091658  4C 00 01 2C */	isync
/* 8009613C 0009165C  7C 60 00 A6 */	mfmsr r3
/* 80096140 00091660  60 63 00 30 */	ori r3, r3, 0x30
/* 80096144 00091664  7C 7B 03 A6 */	mtspr 0x1b, r3
/* 80096148 00091668  7C 68 02 A6 */	mflr r3
/* 8009614C 0009166C  7C 7A 03 A6 */	mtspr 0x1a, r3
/* 80096150 00091670  4C 00 00 64 */	rfi

glabel ConfigMEM2_128MB
/* 80096154 00091674  38 E0 00 00 */	li r7, 0
/* 80096158 00091678  3C 80 10 00 */	lis r4, 0x10000002@ha
/* 8009615C 0009167C  38 84 00 02 */	addi r4, r4, 0x10000002@l
/* 80096160 00091680  3C 60 90 00 */	lis r3, 0x90000FFF@ha
/* 80096164 00091684  38 63 0F FF */	addi r3, r3, 0x90000FFF@l
/* 80096168 00091688  3C C0 10 00 */	lis r6, 0x1000002A@ha
/* 8009616C 0009168C  38 C6 00 2A */	addi r6, r6, 0x1000002A@l
/* 80096170 00091690  3C A0 D0 00 */	lis r5, 0xD0000FFF@ha
/* 80096174 00091694  38 A5 0F FF */	addi r5, r5, 0xD0000FFF@l
/* 80096178 00091698  4C 00 01 2C */	isync
/* 8009617C 0009169C  7C F8 8B A6 */	mtspr 0x238, r7
/* 80096180 000916A0  7C 99 8B A6 */	mtspr 0x239, r4
/* 80096184 000916A4  7C 78 8B A6 */	mtspr 0x238, r3
/* 80096188 000916A8  4C 00 01 2C */	isync
/* 8009618C 000916AC  7C F0 8B A6 */	mtspr 0x230, r7
/* 80096190 000916B0  7C 91 8B A6 */	mtspr 0x231, r4
/* 80096194 000916B4  7C 70 8B A6 */	mtspr 0x230, r3
/* 80096198 000916B8  4C 00 01 2C */	isync
/* 8009619C 000916BC  7C FA 8B A6 */	mtspr 0x23a, r7
/* 800961A0 000916C0  7C DB 8B A6 */	mtspr 0x23b, r6
/* 800961A4 000916C4  7C BA 8B A6 */	mtspr 0x23a, r5
/* 800961A8 000916C8  4C 00 01 2C */	isync
/* 800961AC 000916CC  7C F2 8B A6 */	mtspr 0x232, r7
/* 800961B0 000916D0  7C F3 8B A6 */	mtspr 0x233, r7
/* 800961B4 000916D4  4C 00 01 2C */	isync
/* 800961B8 000916D8  7C F4 8B A6 */	mtspr 0x234, r7
/* 800961BC 000916DC  7C F5 8B A6 */	mtspr 0x235, r7
/* 800961C0 000916E0  4C 00 01 2C */	isync
/* 800961C4 000916E4  7C F6 8B A6 */	mtspr 0x236, r7
/* 800961C8 000916E8  7C F7 8B A6 */	mtspr 0x237, r7
/* 800961CC 000916EC  4C 00 01 2C */	isync
/* 800961D0 000916F0  7C FC 8B A6 */	mtspr 0x23c, r7
/* 800961D4 000916F4  7C FD 8B A6 */	mtspr 0x23d, r7
/* 800961D8 000916F8  4C 00 01 2C */	isync
/* 800961DC 000916FC  7C FE 8B A6 */	mtspr 0x23e, r7
/* 800961E0 00091700  7C FF 8B A6 */	mtspr 0x23f, r7
/* 800961E4 00091704  4C 00 01 2C */	isync
/* 800961E8 00091708  7C 60 00 A6 */	mfmsr r3
/* 800961EC 0009170C  60 63 00 30 */	ori r3, r3, 0x30
/* 800961F0 00091710  7C 7B 03 A6 */	mtspr 0x1b, r3
/* 800961F4 00091714  7C 68 02 A6 */	mflr r3
/* 800961F8 00091718  7C 7A 03 A6 */	mtspr 0x1a, r3
/* 800961FC 0009171C  4C 00 00 64 */	rfi

glabel ConfigMEM_ES1_0
/* 80096200 00091720  38 E0 00 00 */	li r7, 0
/* 80096204 00091724  3C 80 00 00 */	lis r4, 0x00000002@ha
/* 80096208 00091728  38 84 00 02 */	addi r4, r4, 0x00000002@l
/* 8009620C 0009172C  3C 60 80 00 */	lis r3, 0x80000FFF@ha
/* 80096210 00091730  38 63 0F FF */	addi r3, r3, 0x80000FFF@l
/* 80096214 00091734  4C 00 01 2C */	isync
/* 80096218 00091738  7C F8 83 A6 */	mtdbatu 0, r7
/* 8009621C 0009173C  7C 99 83 A6 */	mtdbatl 0, r4
/* 80096220 00091740  7C 78 83 A6 */	mtdbatu 0, r3
/* 80096224 00091744  4C 00 01 2C */	isync
/* 80096228 00091748  7C F0 83 A6 */	mtibatu 0, r7
/* 8009622C 0009174C  7C 91 83 A6 */	mtibatl 0, r4
/* 80096230 00091750  7C 70 83 A6 */	mtibatu 0, r3
/* 80096234 00091754  4C 00 01 2C */	isync
/* 80096238 00091758  7C 60 00 A6 */	mfmsr r3
/* 8009623C 0009175C  60 63 00 30 */	ori r3, r3, 0x30
/* 80096240 00091760  7C 7B 03 A6 */	mtspr 0x1b, r3
/* 80096244 00091764  7C 68 02 A6 */	mflr r3
/* 80096248 00091768  7C 7A 03 A6 */	mtspr 0x1a, r3
/* 8009624C 0009176C  4C 00 00 64 */	rfi

glabel RealMode
/* 80096250 00091770  54 63 00 BE */	clrlwi r3, r3, 2
/* 80096254 00091774  7C 7A 03 A6 */	mtspr 0x1a, r3
/* 80096258 00091778  7C 60 00 A6 */	mfmsr r3
/* 8009625C 0009177C  54 63 07 32 */	rlwinm r3, r3, 0, 0x1c, 0x19
/* 80096260 00091780  7C 7B 03 A6 */	mtspr 0x1b, r3
/* 80096264 00091784  4C 00 00 64 */	rfi

glabel BATConfig
/* 80096268 00091788  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 8009626C 0009178C  7C 08 02 A6 */	mflr r0
/* 80096270 00091790  3C 60 80 00 */	lis r3, 0x80003138@ha
/* 80096274 00091794  90 01 00 14 */	stw r0, 0x14(r1)
/* 80096278 00091798  93 E1 00 0C */	stw r31, 0xc(r1)
/* 8009627C 0009179C  80 03 31 38 */	lwz r0, 0x80003138@l(r3)
/* 80096280 000917A0  2C 00 00 00 */	cmpwi r0, 0
/* 80096284 000917A4  40 82 00 20 */	bne .L_800962A4
/* 80096288 000917A8  3C 00 80 09 */	lis r0, 0x8009
/* 8009628C 000917AC  34 00 5C 54 */	addic. r0, r0, 0x5c54
/* 80096290 000917B0  40 82 00 14 */	bne .L_800962A4
/* 80096294 000917B4  3C 60 80 09 */	lis r3, ConfigMEM_ES1_0@ha
/* 80096298 000917B8  38 63 62 00 */	addi r3, r3, ConfigMEM_ES1_0@l
/* 8009629C 000917BC  4B FF FF B5 */	bl RealMode
/* 800962A0 000917C0  48 00 01 04 */	b .L_800963A4
.L_800962A4:
/* 800962A4 000917C4  3C 60 80 00 */	lis r3, 0x80003104@ha
/* 800962A8 000917C8  83 E3 31 04 */	lwz r31, 0x80003104@l(r3)
/* 800962AC 000917CC  80 03 31 00 */	lwz r0, 0x3100(r3)
/* 800962B0 000917D0  7C 1F 00 40 */	cmplw r31, r0
/* 800962B4 000917D4  40 80 00 28 */	bge .L_800962DC
/* 800962B8 000917D8  3C 1F FE 80 */	addis r0, r31, 0xfe80
/* 800962BC 000917DC  28 00 00 00 */	cmplwi r0, 0
/* 800962C0 000917E0  40 82 00 1C */	bne .L_800962DC
/* 800962C4 000917E4  3C 60 81 80 */	lis r3, 0x8180
/* 800962C8 000917E8  3C 80 01 80 */	lis r4, 0x180
/* 800962CC 000917EC  4B FF A9 75 */	bl DCInvalidateRange
/* 800962D0 000917F0  38 00 00 02 */	li r0, 2
/* 800962D4 000917F4  3C 60 CC 00 */	lis r3, 0xCC004028@ha
/* 800962D8 000917F8  B0 03 40 28 */	sth r0, 0xCC004028@l(r3)
.L_800962DC:
/* 800962DC 000917FC  3C 00 01 80 */	lis r0, 0x180
/* 800962E0 00091800  7C 1F 00 40 */	cmplw r31, r0
/* 800962E4 00091804  41 81 00 14 */	bgt .L_800962F8
/* 800962E8 00091808  3C 60 80 09 */	lis r3, ConfigMEM1_24MB@ha
/* 800962EC 0009180C  38 63 5D 08 */	addi r3, r3, ConfigMEM1_24MB@l
/* 800962F0 00091810  4B FF FF 61 */	bl RealMode
/* 800962F4 00091814  48 00 00 1C */	b .L_80096310
.L_800962F8:
/* 800962F8 00091818  3C 00 03 00 */	lis r0, 0x300
/* 800962FC 0009181C  7C 1F 00 40 */	cmplw r31, r0
/* 80096300 00091820  41 81 00 10 */	bgt .L_80096310
/* 80096304 00091824  3C 60 80 09 */	lis r3, ConfigMEM1_48MB@ha
/* 80096308 00091828  38 63 5D 88 */	addi r3, r3, ConfigMEM1_48MB@l
/* 8009630C 0009182C  4B FF FF 45 */	bl RealMode
.L_80096310:
/* 80096310 00091830  3C 60 80 00 */	lis r3, 0x8000311C@ha
/* 80096314 00091834  3C 00 04 00 */	lis r0, 0x400
/* 80096318 00091838  80 83 31 1C */	lwz r4, 0x8000311C@l(r3)
/* 8009631C 0009183C  80 63 31 20 */	lwz r3, 0x3120(r3)
/* 80096320 00091840  7C 04 00 40 */	cmplw r4, r0
/* 80096324 00091844  41 81 00 4C */	bgt .L_80096370
/* 80096328 00091848  3C 00 93 40 */	lis r0, 0x9340
/* 8009632C 0009184C  7C 03 00 40 */	cmplw r3, r0
/* 80096330 00091850  41 81 00 14 */	bgt .L_80096344
/* 80096334 00091854  3C 60 80 09 */	lis r3, ConfigMEM2_52MB@ha
/* 80096338 00091858  38 63 5E 08 */	addi r3, r3, ConfigMEM2_52MB@l
/* 8009633C 0009185C  4B FF FF 15 */	bl RealMode
/* 80096340 00091860  48 00 00 64 */	b .L_800963A4
.L_80096344:
/* 80096344 00091864  3C 00 93 80 */	lis r0, 0x9380
/* 80096348 00091868  7C 03 00 40 */	cmplw r3, r0
/* 8009634C 0009186C  41 81 00 14 */	bgt .L_80096360
/* 80096350 00091870  3C 60 80 09 */	lis r3, ConfigMEM2_56MB@ha
/* 80096354 00091874  38 63 5E E8 */	addi r3, r3, ConfigMEM2_56MB@l
/* 80096358 00091878  4B FF FE F9 */	bl RealMode
/* 8009635C 0009187C  48 00 00 48 */	b .L_800963A4
.L_80096360:
/* 80096360 00091880  3C 60 80 09 */	lis r3, ConfigMEM2_64MB@ha
/* 80096364 00091884  38 63 5F C8 */	addi r3, r3, ConfigMEM2_64MB@l
/* 80096368 00091888  4B FF FE E9 */	bl RealMode
/* 8009636C 0009188C  48 00 00 38 */	b .L_800963A4
.L_80096370:
/* 80096370 00091890  3C 00 08 00 */	lis r0, 0x800
/* 80096374 00091894  7C 04 00 40 */	cmplw r4, r0
/* 80096378 00091898  41 81 00 2C */	bgt .L_800963A4
/* 8009637C 0009189C  3C 00 97 00 */	lis r0, 0x9700
/* 80096380 000918A0  7C 03 00 40 */	cmplw r3, r0
/* 80096384 000918A4  41 81 00 14 */	bgt .L_80096398
/* 80096388 000918A8  3C 60 80 09 */	lis r3, ConfigMEM2_112MB@ha
/* 8009638C 000918AC  38 63 60 74 */	addi r3, r3, ConfigMEM2_112MB@l
/* 80096390 000918B0  4B FF FE C1 */	bl RealMode
/* 80096394 000918B4  48 00 00 10 */	b .L_800963A4
.L_80096398:
/* 80096398 000918B8  3C 60 80 09 */	lis r3, ConfigMEM2_128MB@ha
/* 8009639C 000918BC  38 63 61 54 */	addi r3, r3, ConfigMEM2_128MB@l
/* 800963A0 000918C0  4B FF FE B1 */	bl RealMode
.L_800963A4:
/* 800963A4 000918C4  80 01 00 14 */	lwz r0, 0x14(r1)
/* 800963A8 000918C8  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 800963AC 000918CC  7C 08 03 A6 */	mtlr r0
/* 800963B0 000918D0  38 21 00 10 */	addi r1, r1, 0x10
/* 800963B4 000918D4  4E 80 00 20 */	blr

glabel __OSInitMemoryProtection
/* 800963B8 000918D8  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 800963BC 000918DC  7C 08 02 A6 */	mflr r0
/* 800963C0 000918E0  90 01 00 14 */	stw r0, 0x14(r1)
/* 800963C4 000918E4  93 E1 00 0C */	stw r31, 0xc(r1)
/* 800963C8 000918E8  93 C1 00 08 */	stw r30, 8(r1)
/* 800963CC 000918EC  4B FF EE E9 */	bl OSDisableInterrupts
/* 800963D0 000918F0  3C 80 CC 00 */	lis r4, 0xCC004020@ha
/* 800963D4 000918F4  38 00 00 00 */	li r0, 0
/* 800963D8 000918F8  B0 04 40 20 */	sth r0, 0xCC004020@l(r4)
/* 800963DC 000918FC  38 00 00 FF */	li r0, 0xff
/* 800963E0 00091900  7C 7E 1B 78 */	mr r30, r3
/* 800963E4 00091904  3C 60 F0 00 */	lis r3, 0xf000
/* 800963E8 00091908  B0 04 40 10 */	sth r0, 0x4010(r4)
/* 800963EC 0009190C  4B FF F2 59 */	bl __OSMaskInterrupts
/* 800963F0 00091910  3F E0 80 09 */	lis r31, MEMIntrruptHandler@ha
/* 800963F4 00091914  38 60 00 00 */	li r3, 0
/* 800963F8 00091918  38 9F 5C C0 */	addi r4, r31, MEMIntrruptHandler@l
/* 800963FC 0009191C  4B FF EF 05 */	bl __OSSetInterruptHandler
/* 80096400 00091920  38 9F 5C C0 */	addi r4, r31, 0x5cc0
/* 80096404 00091924  38 60 00 01 */	li r3, 1
/* 80096408 00091928  4B FF EE F9 */	bl __OSSetInterruptHandler
/* 8009640C 0009192C  38 9F 5C C0 */	addi r4, r31, 0x5cc0
/* 80096410 00091930  38 60 00 02 */	li r3, 2
/* 80096414 00091934  4B FF EE ED */	bl __OSSetInterruptHandler
/* 80096418 00091938  38 9F 5C C0 */	addi r4, r31, 0x5cc0
/* 8009641C 0009193C  38 60 00 03 */	li r3, 3
/* 80096420 00091940  4B FF EE E1 */	bl __OSSetInterruptHandler
/* 80096424 00091944  38 9F 5C C0 */	addi r4, r31, 0x5cc0
/* 80096428 00091948  38 60 00 04 */	li r3, 4
/* 8009642C 0009194C  4B FF EE D5 */	bl __OSSetInterruptHandler
/* 80096430 00091950  3C 60 80 18 */	lis r3, lbl_801840B0@ha
/* 80096434 00091954  38 63 40 B0 */	addi r3, r3, lbl_801840B0@l
/* 80096438 00091958  48 00 02 ED */	bl OSRegisterShutdownFunction
/* 8009643C 0009195C  4B FF FE 2D */	bl BATConfig
/* 80096440 00091960  3C 60 08 00 */	lis r3, 0x800
/* 80096444 00091964  4B FF F2 81 */	bl __OSUnmaskInterrupts
/* 80096448 00091968  7F C3 F3 78 */	mr r3, r30
/* 8009644C 0009196C  4B FF EE 91 */	bl OSRestoreInterrupts
/* 80096450 00091970  80 01 00 14 */	lwz r0, 0x14(r1)
/* 80096454 00091974  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 80096458 00091978  83 C1 00 08 */	lwz r30, 8(r1)
/* 8009645C 0009197C  7C 08 03 A6 */	mtlr r0
/* 80096460 00091980  38 21 00 10 */	addi r1, r1, 0x10
/* 80096464 00091984  4E 80 00 20 */	blr

