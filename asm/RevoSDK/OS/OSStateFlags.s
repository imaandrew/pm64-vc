.include "macros.inc"

.section .text, "ax"

glabel __OSWriteStateFlags
/* 8009A470 00095990  94 21 FF 60 */	stwu r1, -0xa0(r1)
/* 8009A474 00095994  7C 08 02 A6 */	mflr r0
/* 8009A478 00095998  7C 64 1B 78 */	mr r4, r3
/* 8009A47C 0009599C  38 A0 00 20 */	li r5, 0x20
/* 8009A480 000959A0  90 01 00 A4 */	stw r0, 0xa4(r1)
/* 8009A484 000959A4  93 E1 00 9C */	stw r31, 0x9c(r1)
/* 8009A488 000959A8  93 C1 00 98 */	stw r30, 0x98(r1)
/* 8009A48C 000959AC  3F C0 80 1C */	lis r30, lbl_801C5620@ha
/* 8009A490 000959B0  38 7E 56 20 */	addi r3, r30, lbl_801C5620@l
/* 8009A494 000959B4  4B F6 9E A5 */	bl memcpy
/* 8009A498 000959B8  3B FE 56 20 */	addi r31, r30, 0x5620
/* 8009A49C 000959BC  3C 60 80 19 */	lis r3, lbl_80190120@ha
/* 8009A4A0 000959C0  80 DF 00 04 */	lwz r6, 4(r31)
/* 8009A4A4 000959C4  38 63 01 20 */	addi r3, r3, lbl_80190120@l
/* 8009A4A8 000959C8  80 1F 00 08 */	lwz r0, 8(r31)
/* 8009A4AC 000959CC  38 81 00 08 */	addi r4, r1, 8
/* 8009A4B0 000959D0  38 A0 00 02 */	li r5, 2
/* 8009A4B4 000959D4  7C C6 02 14 */	add r6, r6, r0
/* 8009A4B8 000959D8  80 1F 00 0C */	lwz r0, 0xc(r31)
/* 8009A4BC 000959DC  7C C6 02 14 */	add r6, r6, r0
/* 8009A4C0 000959E0  80 1F 00 10 */	lwz r0, 0x10(r31)
/* 8009A4C4 000959E4  7C C6 02 14 */	add r6, r6, r0
/* 8009A4C8 000959E8  80 1F 00 14 */	lwz r0, 0x14(r31)
/* 8009A4CC 000959EC  7C C6 02 14 */	add r6, r6, r0
/* 8009A4D0 000959F0  80 1F 00 18 */	lwz r0, 0x18(r31)
/* 8009A4D4 000959F4  7C C6 02 14 */	add r6, r6, r0
/* 8009A4D8 000959F8  80 1F 00 1C */	lwz r0, 0x1c(r31)
/* 8009A4DC 000959FC  7C C6 02 14 */	add r6, r6, r0
/* 8009A4E0 00095A00  90 DE 56 20 */	stw r6, 0x5620(r30)
/* 8009A4E4 00095A04  48 01 FB 65 */	bl NANDOpen
/* 8009A4E8 00095A08  2C 03 00 00 */	cmpwi r3, 0
/* 8009A4EC 00095A0C  40 82 00 44 */	bne lbl_8009A530
/* 8009A4F0 00095A10  7F E4 FB 78 */	mr r4, r31
/* 8009A4F4 00095A14  38 61 00 08 */	addi r3, r1, 8
/* 8009A4F8 00095A18  38 A0 00 20 */	li r5, 0x20
/* 8009A4FC 00095A1C  48 01 F0 85 */	bl NANDWrite
/* 8009A500 00095A20  28 03 00 20 */	cmplwi r3, 0x20
/* 8009A504 00095A24  41 82 00 14 */	beq lbl_8009A518
/* 8009A508 00095A28  38 61 00 08 */	addi r3, r1, 8
/* 8009A50C 00095A2C  48 01 FD BD */	bl NANDClose
/* 8009A510 00095A30  38 60 00 00 */	li r3, 0
/* 8009A514 00095A34  48 00 00 28 */	b lbl_8009A53C
lbl_8009A518:
/* 8009A518 00095A38  38 61 00 08 */	addi r3, r1, 8
/* 8009A51C 00095A3C  48 01 FD AD */	bl NANDClose
/* 8009A520 00095A40  2C 03 00 00 */	cmpwi r3, 0
/* 8009A524 00095A44  41 82 00 14 */	beq lbl_8009A538
/* 8009A528 00095A48  38 60 00 00 */	li r3, 0
/* 8009A52C 00095A4C  48 00 00 10 */	b lbl_8009A53C
lbl_8009A530:
/* 8009A530 00095A50  38 60 00 00 */	li r3, 0
/* 8009A534 00095A54  48 00 00 08 */	b lbl_8009A53C
lbl_8009A538:
/* 8009A538 00095A58  38 60 00 01 */	li r3, 1
lbl_8009A53C:
/* 8009A53C 00095A5C  80 01 00 A4 */	lwz r0, 0xa4(r1)
/* 8009A540 00095A60  83 E1 00 9C */	lwz r31, 0x9c(r1)
/* 8009A544 00095A64  83 C1 00 98 */	lwz r30, 0x98(r1)
/* 8009A548 00095A68  7C 08 03 A6 */	mtlr r0
/* 8009A54C 00095A6C  38 21 00 A0 */	addi r1, r1, 0xa0
/* 8009A550 00095A70  4E 80 00 20 */	blr 

glabel __OSReadStateFlags
/* 8009A554 00095A74  94 21 FF 50 */	stwu r1, -0xb0(r1)
/* 8009A558 00095A78  7C 08 02 A6 */	mflr r0
/* 8009A55C 00095A7C  38 A0 00 01 */	li r5, 1
/* 8009A560 00095A80  90 01 00 B4 */	stw r0, 0xb4(r1)
/* 8009A564 00095A84  38 81 00 08 */	addi r4, r1, 8
/* 8009A568 00095A88  93 E1 00 AC */	stw r31, 0xac(r1)
/* 8009A56C 00095A8C  93 C1 00 A8 */	stw r30, 0xa8(r1)
/* 8009A570 00095A90  93 A1 00 A4 */	stw r29, 0xa4(r1)
/* 8009A574 00095A94  3F A0 80 19 */	lis r29, lbl_80190120@ha
/* 8009A578 00095A98  93 81 00 A0 */	stw r28, 0xa0(r1)
/* 8009A57C 00095A9C  7C 7C 1B 78 */	mr r28, r3
/* 8009A580 00095AA0  38 7D 01 20 */	addi r3, r29, lbl_80190120@l
/* 8009A584 00095AA4  48 01 FA C5 */	bl NANDOpen
/* 8009A588 00095AA8  2C 03 00 00 */	cmpwi r3, 0
/* 8009A58C 00095AAC  40 82 00 4C */	bne lbl_8009A5D8
/* 8009A590 00095AB0  3F C0 80 1C */	lis r30, lbl_801C5620@ha
/* 8009A594 00095AB4  38 61 00 08 */	addi r3, r1, 8
/* 8009A598 00095AB8  38 9E 56 20 */	addi r4, r30, lbl_801C5620@l
/* 8009A59C 00095ABC  38 A0 00 20 */	li r5, 0x20
/* 8009A5A0 00095AC0  48 01 EF 01 */	bl NANDRead
/* 8009A5A4 00095AC4  7C 7F 1B 78 */	mr r31, r3
/* 8009A5A8 00095AC8  38 61 00 08 */	addi r3, r1, 8
/* 8009A5AC 00095ACC  48 01 FD 1D */	bl NANDClose
/* 8009A5B0 00095AD0  28 1F 00 20 */	cmplwi r31, 0x20
/* 8009A5B4 00095AD4  41 82 00 3C */	beq lbl_8009A5F0
/* 8009A5B8 00095AD8  38 7D 01 20 */	addi r3, r29, 0x120
/* 8009A5BC 00095ADC  48 01 ED 75 */	bl NANDDelete
/* 8009A5C0 00095AE0  7F 83 E3 78 */	mr r3, r28
/* 8009A5C4 00095AE4  38 80 00 00 */	li r4, 0
/* 8009A5C8 00095AE8  38 A0 00 20 */	li r5, 0x20
/* 8009A5CC 00095AEC  4B F6 9E 71 */	bl memset
/* 8009A5D0 00095AF0  38 60 00 00 */	li r3, 0
/* 8009A5D4 00095AF4  48 00 00 88 */	b lbl_8009A65C
lbl_8009A5D8:
/* 8009A5D8 00095AF8  7F 83 E3 78 */	mr r3, r28
/* 8009A5DC 00095AFC  38 80 00 00 */	li r4, 0
/* 8009A5E0 00095B00  38 A0 00 20 */	li r5, 0x20
/* 8009A5E4 00095B04  4B F6 9E 59 */	bl memset
/* 8009A5E8 00095B08  38 60 00 00 */	li r3, 0
/* 8009A5EC 00095B0C  48 00 00 70 */	b lbl_8009A65C
lbl_8009A5F0:
/* 8009A5F0 00095B10  38 9E 56 20 */	addi r4, r30, 0x5620
/* 8009A5F4 00095B14  80 1E 56 20 */	lwz r0, 0x5620(r30)
/* 8009A5F8 00095B18  80 A4 00 04 */	lwz r5, 4(r4)
/* 8009A5FC 00095B1C  80 64 00 08 */	lwz r3, 8(r4)
/* 8009A600 00095B20  7C A5 1A 14 */	add r5, r5, r3
/* 8009A604 00095B24  80 64 00 0C */	lwz r3, 0xc(r4)
/* 8009A608 00095B28  7C A5 1A 14 */	add r5, r5, r3
/* 8009A60C 00095B2C  80 64 00 10 */	lwz r3, 0x10(r4)
/* 8009A610 00095B30  7C A5 1A 14 */	add r5, r5, r3
/* 8009A614 00095B34  80 64 00 14 */	lwz r3, 0x14(r4)
/* 8009A618 00095B38  7C A5 1A 14 */	add r5, r5, r3
/* 8009A61C 00095B3C  80 64 00 18 */	lwz r3, 0x18(r4)
/* 8009A620 00095B40  7C A5 1A 14 */	add r5, r5, r3
/* 8009A624 00095B44  80 64 00 1C */	lwz r3, 0x1c(r4)
/* 8009A628 00095B48  7C A5 1A 14 */	add r5, r5, r3
/* 8009A62C 00095B4C  7C 00 28 40 */	cmplw r0, r5
/* 8009A630 00095B50  41 82 00 1C */	beq lbl_8009A64C
/* 8009A634 00095B54  7F 83 E3 78 */	mr r3, r28
/* 8009A638 00095B58  38 80 00 00 */	li r4, 0
/* 8009A63C 00095B5C  38 A0 00 20 */	li r5, 0x20
/* 8009A640 00095B60  4B F6 9D FD */	bl memset
/* 8009A644 00095B64  38 60 00 00 */	li r3, 0
/* 8009A648 00095B68  48 00 00 14 */	b lbl_8009A65C
lbl_8009A64C:
/* 8009A64C 00095B6C  7F 83 E3 78 */	mr r3, r28
/* 8009A650 00095B70  38 A0 00 20 */	li r5, 0x20
/* 8009A654 00095B74  4B F6 9C E5 */	bl memcpy
/* 8009A658 00095B78  38 60 00 01 */	li r3, 1
lbl_8009A65C:
/* 8009A65C 00095B7C  80 01 00 B4 */	lwz r0, 0xb4(r1)
/* 8009A660 00095B80  83 E1 00 AC */	lwz r31, 0xac(r1)
/* 8009A664 00095B84  83 C1 00 A8 */	lwz r30, 0xa8(r1)
/* 8009A668 00095B88  83 A1 00 A4 */	lwz r29, 0xa4(r1)
/* 8009A66C 00095B8C  83 81 00 A0 */	lwz r28, 0xa0(r1)
/* 8009A670 00095B90  7C 08 03 A6 */	mtlr r0
/* 8009A674 00095B94  38 21 00 B0 */	addi r1, r1, 0xb0
/* 8009A678 00095B98  4E 80 00 20 */	blr 

.section .bss, "wa"  # 0x801ADFC0 - 0x80246480

glabel lbl_801C5620
	.skip 0x20