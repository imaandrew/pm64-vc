.include "macros.inc"

.section .text, "ax"

glabel PPCMfmsr
/* 8008E984 00089EA4  7C 60 00 A6 */	mfmsr r3
/* 8008E988 00089EA8  4E 80 00 20 */	blr

glabel PPCMtmsr
/* 8008E98C 00089EAC  7C 60 01 24 */	mtmsr r3
/* 8008E990 00089EB0  4E 80 00 20 */	blr

glabel PPCMfhid0
/* 8008E994 00089EB4  7C 70 FA A6 */	mfspr r3, 0x3f0
/* 8008E998 00089EB8  4E 80 00 20 */	blr

glabel PPCMthid0
/* 8008E99C 00089EBC  7C 70 FB A6 */	mtspr 0x3f0, r3
/* 8008E9A0 00089EC0  4E 80 00 20 */	blr

glabel PPCMfl2cr
/* 8008E9A4 00089EC4  7C 79 FA A6 */	mfspr r3, 0x3f9
/* 8008E9A8 00089EC8  4E 80 00 20 */	blr

glabel PPCMtl2cr
/* 8008E9AC 00089ECC  7C 79 FB A6 */	mtspr 0x3f9, r3
/* 8008E9B0 00089ED0  4E 80 00 20 */	blr

glabel PPCMtdec
/* 8008E9B4 00089ED4  7C 76 03 A6 */	mtspr 0x16, r3
/* 8008E9B8 00089ED8  4E 80 00 20 */	blr

glabel PPCSync
/* 8008E9BC 00089EDC  44 00 00 02 */	sc
/* 8008E9C0 00089EE0  4E 80 00 20 */	blr

glabel PPCHalt
/* 8008E9C4 00089EE4  7C 00 04 AC */	sync 0
.L_8008E9C8:
/* 8008E9C8 00089EE8  60 00 00 00 */	nop
/* 8008E9CC 00089EEC  38 60 00 00 */	li r3, 0
/* 8008E9D0 00089EF0  60 00 00 00 */	nop
/* 8008E9D4 00089EF4  4B FF FF F4 */	b .L_8008E9C8

glabel PPCMtmmcr0
/* 8008E9D8 00089EF8  7C 78 EB A6 */	mtspr 0x3b8, r3
/* 8008E9DC 00089EFC  4E 80 00 20 */	blr

glabel PPCMtmmcr1
/* 8008E9E0 00089F00  7C 7C EB A6 */	mtspr 0x3bc, r3
/* 8008E9E4 00089F04  4E 80 00 20 */	blr

glabel PPCMtpmc1
/* 8008E9E8 00089F08  7C 79 EB A6 */	mtspr 0x3b9, r3
/* 8008E9EC 00089F0C  4E 80 00 20 */	blr

glabel PPCMtpmc2
/* 8008E9F0 00089F10  7C 7A EB A6 */	mtspr 0x3ba, r3
/* 8008E9F4 00089F14  4E 80 00 20 */	blr

glabel PPCMtpmc3
/* 8008E9F8 00089F18  7C 7D EB A6 */	mtspr 0x3bd, r3
/* 8008E9FC 00089F1C  4E 80 00 20 */	blr

glabel PPCMtpmc4
/* 8008EA00 00089F20  7C 7E EB A6 */	mtspr 0x3be, r3
/* 8008EA04 00089F24  4E 80 00 20 */	blr

glabel PPCMffpscr
/* 8008EA08 00089F28  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 8008EA0C 00089F2C  DB E1 00 18 */	stfd f31, 0x18(r1)
/* 8008EA10 00089F30  FF E0 04 8E */	mffs f31
/* 8008EA14 00089F34  DB E1 00 08 */	stfd f31, 8(r1)
/* 8008EA18 00089F38  CB E1 00 18 */	lfd f31, 0x18(r1)
/* 8008EA1C 00089F3C  80 61 00 0C */	lwz r3, 0xc(r1)
/* 8008EA20 00089F40  38 21 00 20 */	addi r1, r1, 0x20
/* 8008EA24 00089F44  4E 80 00 20 */	blr

glabel PPCMtfpscr
/* 8008EA28 00089F48  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 8008EA2C 00089F4C  DB E1 00 18 */	stfd f31, 0x18(r1)
/* 8008EA30 00089F50  38 80 00 00 */	li r4, 0
/* 8008EA34 00089F54  90 61 00 0C */	stw r3, 0xc(r1)
/* 8008EA38 00089F58  90 81 00 08 */	stw r4, 8(r1)
/* 8008EA3C 00089F5C  CB E1 00 08 */	lfd f31, 8(r1)
/* 8008EA40 00089F60  FD FE FD 8E */	mtfsf 0xff, f31
/* 8008EA44 00089F64  CB E1 00 18 */	lfd f31, 0x18(r1)
/* 8008EA48 00089F68  38 21 00 20 */	addi r1, r1, 0x20
/* 8008EA4C 00089F6C  4E 80 00 20 */	blr

glabel PPCMfhid2
/* 8008EA50 00089F70  7C 78 E2 A6 */	mfspr r3, 0x398
/* 8008EA54 00089F74  4E 80 00 20 */	blr

glabel PPCMthid2
/* 8008EA58 00089F78  7C 78 E3 A6 */	mtspr 0x398, r3
/* 8008EA5C 00089F7C  4E 80 00 20 */	blr

glabel PPCMtwpar
/* 8008EA60 00089F80  7C 79 E3 A6 */	mtspr 0x399, r3
/* 8008EA64 00089F84  4E 80 00 20 */	blr

glabel PPCDisableSpeculation
/* 8008EA68 00089F88  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 8008EA6C 00089F8C  7C 08 02 A6 */	mflr r0
/* 8008EA70 00089F90  90 01 00 14 */	stw r0, 0x14(r1)
/* 8008EA74 00089F94  4B FF FF 21 */	bl PPCMfhid0
/* 8008EA78 00089F98  60 63 02 00 */	ori r3, r3, 0x200
/* 8008EA7C 00089F9C  4B FF FF 21 */	bl PPCMthid0
/* 8008EA80 00089FA0  80 01 00 14 */	lwz r0, 0x14(r1)
/* 8008EA84 00089FA4  7C 08 03 A6 */	mtlr r0
/* 8008EA88 00089FA8  38 21 00 10 */	addi r1, r1, 0x10
/* 8008EA8C 00089FAC  4E 80 00 20 */	blr

glabel PPCSetFpNonIEEEMode
/* 8008EA90 00089FB0  FF A0 00 4C */	mtfsb1 0x1d
/* 8008EA94 00089FB4  4E 80 00 20 */	blr

glabel PPCMthid4
/* 8008EA98 00089FB8  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 8008EA9C 00089FBC  7C 08 02 A6 */	mflr r0
/* 8008EAA0 00089FC0  90 01 00 14 */	stw r0, 0x14(r1)
/* 8008EAA4 00089FC4  54 60 00 01 */	rlwinm. r0, r3, 0, 0, 0
/* 8008EAA8 00089FC8  93 E1 00 0C */	stw r31, 0xc(r1)
/* 8008EAAC 00089FCC  7C 7F 1B 78 */	mr r31, r3
/* 8008EAB0 00089FD0  41 82 00 0C */	beq .L_8008EABC
/* 8008EAB4 00089FD4  7C 73 FB A6 */	mtspr 0x3f3, r3
/* 8008EAB8 00089FD8  48 00 00 1C */	b .L_8008EAD4
.L_8008EABC:
/* 8008EABC 00089FDC  3C 60 80 18 */	lis r3, lbl_80182950@ha
/* 8008EAC0 00089FE0  38 63 29 50 */	addi r3, r3, lbl_80182950@l
/* 8008EAC4 00089FE4  4C C6 31 82 */	crclr 6
/* 8008EAC8 00089FE8  48 00 2D E5 */	bl OSReport
/* 8008EACC 00089FEC  67 FF 80 00 */	oris r31, r31, 0x8000
/* 8008EAD0 00089FF0  7F F3 FB A6 */	mtspr 0x3f3, r31
.L_8008EAD4:
/* 8008EAD4 00089FF4  80 01 00 14 */	lwz r0, 0x14(r1)
/* 8008EAD8 00089FF8  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 8008EADC 00089FFC  7C 08 03 A6 */	mtlr r0
/* 8008EAE0 0008A000  38 21 00 10 */	addi r1, r1, 0x10
/* 8008EAE4 0008A004  4E 80 00 20 */	blr
